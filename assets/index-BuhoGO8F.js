import{r as e,a as t}from"./vendor-D7amQhf0.js";import{r as s,R as a,U as r,a as l,L as o,E as n,b as i,A as c,c as d,d as m,P as x,C as g,S as u,e as h,I as b,T as p,f,X as j,g as N,M as v,h as y,D as w,F as S,i as k,Z as E,j as C,k as P,l as I,m as T,n as A,o as D,p as G,q as R,s as L,H as M}from"./icons-DqZ-p1_T.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var O,_,F={exports:{}},z={};var B,Y=(_||(_=1,F.exports=function(){if(O)return z;O=1;var t=e(),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function n(e,t,a){var n,i={},c=null,d=null;for(n in void 0!==a&&(c=""+a),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)r.call(t,n)&&!o.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:s,type:e,key:c,ref:d,props:i,_owner:l.current}}return z.Fragment=a,z.jsx=n,z.jsxs=n,z}()),F.exports),U={};var $=function(){if(B)return U;B=1;var e=t();return U.createRoot=e.createRoot,U.hydrateRoot=e.hydrateRoot,U}();class K{static STORAGE_KEYS={PLAYERS:"image-spotter-players",IMAGES:"image-spotter-images",CREDENTIALS:"image-spotter-credentials",GAME_SETTINGS:"image-spotter-game-settings",BACKUP_PLAYERS:"image-spotter-players-backup",BACKUP_IMAGES:"image-spotter-images-backup",LAST_BACKUP:"image-spotter-last-backup",PERFORMANCE_STATS:"image-spotter-performance"};static MAX_STORAGE_SIZE=4718592;static CLEANUP_THRESHOLD=.85;static DEVELOPER_CREDENTIALS={username:"dev_meijeevan_2024",password:"VIT_Chennai_Dev_Access_2024!"};static isDeveloper(e,t){return e===this.DEVELOPER_CREDENTIALS.username&&t===this.DEVELOPER_CREDENTIALS.password}static saveData(e,t){const s=performance.now();try{const a=JSON.stringify(t),r=new Blob([a]).size;this.getStorageStats().used+r>this.MAX_STORAGE_SIZE&&(console.warn("Storage approaching limit, performing cleanup..."),this.performStorageCleanup()),localStorage.setItem(e,a);const l=e+"-backup",o={data:a,timestamp:Date.now(),checksum:this.generateChecksum(a),size:r,version:"2.0"};return localStorage.setItem(l,JSON.stringify(o)),this.updatePerformanceStats(e,performance.now()-s,r),localStorage.setItem(this.STORAGE_KEYS.LAST_BACKUP,Date.now().toString()),!0}catch(a){return console.error("Error saving data:",a),this.handleStorageError(e,t)}}static loadData(e,t){const s=performance.now();try{const a=localStorage.getItem(e);if(a){const r=JSON.parse(a);if(this.validateData(r))return this.updatePerformanceStats(e+"-load",performance.now()-s,0),this.mergeWithDefaults(r,t)}return this.recoverFromBackup(e,t)}catch(a){return console.error("Error loading data:",a),this.recoverFromBackup(e,t)}}static mergeWithDefaults(e,t){return Array.isArray(t)?Array.isArray(e)?e:t:"object"==typeof t&&null!==t?{...t,...e}:void 0!==e?e:t}static recoverFromBackup(e,t){try{const s=e+"-backup",a=localStorage.getItem(s);if(a){const s=JSON.parse(a);if(s.data&&s.checksum&&s.timestamp){const a=JSON.parse(s.data);if(this.generateChecksum(s.data)===s.checksum)return console.log("Data recovered from backup for key:",e),localStorage.setItem(e,s.data),this.mergeWithDefaults(a,t);console.warn("Backup checksum mismatch for key:",e)}}}catch(s){console.error("Backup recovery failed:",s)}return t}static handleStorageError(e,t){try{return this.performStorageCleanup(),localStorage.setItem(e,JSON.stringify(t)),console.log("Storage successful after cleanup"),!0}catch(s){try{const s=this.compressData(t);return localStorage.setItem(e,JSON.stringify(s)),console.log("Storage successful with compression"),!0}catch(a){try{return sessionStorage.setItem(e,JSON.stringify(t)),console.warn("Data saved to sessionStorage as fallback"),!0}catch(r){return this.saveToIndexedDB(e,t)}}}}static performStorageCleanup(){const e=Object.keys(localStorage),t=[];e.forEach(e=>{try{if(e.includes("-backup")){const s=JSON.parse(localStorage.getItem(e)||"{}");s.timestamp&&t.push({key:e,timestamp:s.timestamp,size:s.size||0})}}catch(s){localStorage.removeItem(e)}}),t.sort((e,t)=>e.timestamp-t.timestamp);let s=this.getStorageStats().used;const a=this.MAX_STORAGE_SIZE*this.CLEANUP_THRESHOLD;for(const r of t){if(s<=a)break;const e=Date.now()-6048e5;r.timestamp<e&&(localStorage.removeItem(r.key),s-=r.size,console.log("Cleaned up old backup:",r.key))}}static compressData(e){return Array.isArray(e)?e.map(e=>e.url&&e.url.length>1e3?{...e,url:this.compressBase64Image(e.url),compressed:!0}:e):e}static compressBase64Image(e){try{return e}catch(t){return e}}static saveToIndexedDB(e,t){try{if("indexedDB"in window)return console.log("IndexedDB fallback would be implemented here"),!1}catch(s){console.error("IndexedDB fallback failed:",s)}return!1}static generateChecksum(e){let t=0;if(0===e.length)return t.toString();for(let s=0;s<e.length;s++){t=(t<<5)-t+e.charCodeAt(s),t&=t}return`${t.toString()}-${e.length}`}static validateData(e){return!!e&&(Array.isArray(e)?e.every(e=>!(!e||"object"!=typeof e)&&(!(!e.id||"string"!=typeof e.id)&&(!!(!e.url||e.name&&e.size)&&(void 0===e.score||!("number"!=typeof e.score||e.score<0))))):"object"==typeof e)}static updatePerformanceStats(e,t,s){try{const a=JSON.parse(localStorage.getItem(this.STORAGE_KEYS.PERFORMANCE_STATS)||"{}");a[e]||(a[e]={count:0,totalDuration:0,totalSize:0,avgDuration:0,avgSize:0}),a[e].count++,a[e].totalDuration+=t,a[e].totalSize+=s,a[e].avgDuration=a[e].totalDuration/a[e].count,a[e].avgSize=a[e].totalSize/a[e].count,localStorage.setItem(this.STORAGE_KEYS.PERFORMANCE_STATS,JSON.stringify(a))}catch(a){console.warn("Performance stats update failed:",a)}}static exportAllData(){const e={players:this.loadData(this.STORAGE_KEYS.PLAYERS,[]),images:this.loadData(this.STORAGE_KEYS.IMAGES,[]),credentials:this.loadData(this.STORAGE_KEYS.CREDENTIALS,{}),gameSettings:this.loadData(this.STORAGE_KEYS.GAME_SETTINGS,{}),performanceStats:this.loadData(this.STORAGE_KEYS.PERFORMANCE_STATS,{}),exportTimestamp:Date.now(),version:"2.0",storageStats:this.getStorageStats()};return JSON.stringify(e,null,2)}static importAllData(e){try{const t=JSON.parse(e);if(!t.version||!t.exportTimestamp)throw new Error("Invalid backup format");return t.players&&Array.isArray(t.players)&&this.saveData(this.STORAGE_KEYS.PLAYERS,t.players),t.images&&Array.isArray(t.images)&&this.saveData(this.STORAGE_KEYS.IMAGES,t.images),t.credentials&&"object"==typeof t.credentials&&this.saveData(this.STORAGE_KEYS.CREDENTIALS,t.credentials),t.gameSettings&&"object"==typeof t.gameSettings&&this.saveData(this.STORAGE_KEYS.GAME_SETTINGS,t.gameSettings),!0}catch(t){return console.error("Import failed:",t),!1}}static getStorageStats(){let e=0,t=0;const s={};for(let r in localStorage)if(localStorage.hasOwnProperty(r)){const a=localStorage[r].length+r.length;e+=a,t++,r.includes("images")?s.Images=(s.Images||0)+a:r.includes("players")?s.Players=(s.Players||0)+a:r.includes("backup")?s.Backups=(s.Backups||0)+a:s.Other=(s.Other||0)+a}const a=this.MAX_STORAGE_SIZE;return{used:e,total:a,percentage:e/a*100,itemCount:t,breakdown:s,performance:this.loadData(this.STORAGE_KEYS.PERFORMANCE_STATS,{})}}static getPerformanceInsights(){const e=this.loadData(this.STORAGE_KEYS.PERFORMANCE_STATS,{}),t=Object.entries(e);return{slowestOperations:t.map(([e,t])=>({operation:e,avgDuration:t.avgDuration||0})).sort((e,t)=>t.avgDuration-e.avgDuration).slice(0,5),largestOperations:t.map(([e,t])=>({operation:e,avgSize:t.avgSize||0})).sort((e,t)=>t.avgSize-e.avgSize).slice(0,5),totalOperations:t.reduce((e,[,t])=>e+(t.count||0),0)}}}const W=({onLogin:e})=>{const[t,c]=s.useState(""),[d,m]=s.useState(""),[x,g]=s.useState(""),[u,h]=s.useState(!1),[b,p]=s.useState("");return Y.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:Y.jsxs("div",{className:"w-full max-w-md",children:[Y.jsxs("div",{className:"text-center mb-8",children:[Y.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full mb-4",children:Y.jsx(a,{className:"w-10 h-10 text-white"})}),Y.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 bg-clip-text text-transparent mb-2",children:"Image Spotter"}),Y.jsx("p",{className:"text-gray-400",children:"VIT Chennai Clubs Platform"})]}),Y.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-2xl p-8",children:[Y.jsxs("form",{onSubmit:s=>{if(s.preventDefault(),K.isDeveloper(t,d))return void e("Developer Access");const a=K.loadData("image-spotter-credentials",{username:"admin",password:"spotter2024"});t.trim()===a.username.trim()&&d===a.password?e(x.trim()||"VIT Chennai Clubs"):(p("Invalid username or password"),setTimeout(()=>p(""),3e3))},className:"space-y-6",children:[Y.jsxs("div",{children:[Y.jsxs("label",{className:"block text-blue-300 font-medium mb-2 flex items-center gap-2",children:[Y.jsx(r,{className:"w-4 h-4"}),"Club Name (Optional)"]}),Y.jsx("input",{type:"text",value:x,onChange:e=>g(e.target.value),className:"w-full p-4 bg-black/50 border border-blue-500/30 rounded-lg text-white placeholder-gray-400 focus:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400/20 transition-all duration-300",placeholder:"Enter your club name (leave empty if not from a club)"}),Y.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This will be displayed on the home page. Leave empty for default."})]}),Y.jsxs("div",{children:[Y.jsxs("label",{className:"block text-blue-300 font-medium mb-2 flex items-center gap-2",children:[Y.jsx(l,{className:"w-4 h-4"}),"Admin Username"]}),Y.jsx("input",{type:"text",value:t,onChange:e=>c(e.target.value),className:"w-full p-4 bg-black/50 border border-blue-500/30 rounded-lg text-white placeholder-gray-400 focus:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400/20 transition-all duration-300",placeholder:"Enter admin username",required:!0})]}),Y.jsxs("div",{children:[Y.jsxs("label",{className:"block text-blue-300 font-medium mb-2 flex items-center gap-2",children:[Y.jsx(o,{className:"w-4 h-4"}),"Admin Password"]}),Y.jsxs("div",{className:"relative",children:[Y.jsx("input",{type:u?"text":"password",value:d,onChange:e=>m(e.target.value),className:"w-full p-4 bg-black/50 border border-blue-500/30 rounded-lg text-white placeholder-gray-400 focus:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400/20 transition-all duration-300 pr-12",placeholder:"Enter admin password",required:!0}),Y.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-blue-400 transition-colors",children:u?Y.jsx(n,{className:"w-5 h-5"}):Y.jsx(i,{className:"w-5 h-5"})})]})]}),b&&Y.jsx("div",{className:"p-3 bg-red-500/20 border border-red-500/30 rounded-lg text-red-400 text-sm",children:b}),Y.jsx("button",{type:"submit",className:"w-full py-4 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg font-bold text-white hover:from-blue-500 hover:to-purple-500 transition-all duration-300 transform hover:scale-105 hover:shadow-lg hover:shadow-blue-500/25",children:"Access Game System"})]}),Y.jsxs("div",{className:"mt-6 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:[Y.jsxs("p",{className:"text-yellow-400 text-sm text-center",children:[Y.jsx("strong",{children:"Default Admin:"})," admin / spotter2024"]}),Y.jsx("p",{className:"text-gray-400 text-xs text-center mt-1",children:"Credentials can be changed in admin panel"})]}),Y.jsxs("div",{className:"mt-4 p-4 bg-green-500/10 border border-green-500/30 rounded-lg",children:[Y.jsx("p",{className:"text-green-400 text-sm text-center",children:Y.jsx("strong",{children:"VIT Chennai Clubs Platform"})}),Y.jsx("p",{className:"text-gray-400 text-xs text-center mt-1",children:"Conduct engaging image spotter games for your club activities"})]})]})]})})},V=({gameImages:e,setGameImages:t,players:a,updatePlayerScore:r,gameSettings:l,updateGameSettings:o,resetToDefaults:n,onBack:k,onLogout:E})=>{const[C,P]=s.useState("images"),[I,T]=s.useState(null),[A,D]=s.useState(""),[G,R]=s.useState(null),[L,M]=s.useState({}),[O,_]=s.useState(!1),[F,z]=s.useState([]),[B,U]=s.useState(()=>K.loadData("image-spotter-credentials",{username:"admin",password:"spotter2024"})),[$,W]=s.useState(l),[V,H]=s.useState(null),[J,q]=s.useState(""),Z=s.useRef(null),X=s.useRef(null),Q=100,ee=.85,te=s.useMemo(()=>{const t=e.reduce((e,t)=>e+(t.size||0),0),s=Math.min(e.length,l.imagesPerGame),a=e.length/Q*100;return{totalSize:t,readyForGame:s,storageUsagePercent:a,isNearLimit:a>=90}},[e,Q,l.imagesPerGame]),se=s.useCallback(e=>new Promise((t,s)=>{const a=document.createElement("canvas"),r=a.getContext("2d"),l=new Image;l.onload=()=>{try{const n=800;let{width:i,height:c}=l;if(i>n||c>n){const e=Math.min(n/i,n/c);i*=e,c*=e}if(a.width=i,a.height=c,r){let s,n;r.imageSmoothingEnabled=!0,r.imageSmoothingQuality="high",r.drawImage(l,0,0,i,c);try{s=a.toDataURL("image/webp",ee),n=Math.round(.75*s.length),(s.startsWith("data:image/png")||n>e.size)&&(s=a.toDataURL("image/jpeg",ee),n=Math.round(.75*s.length))}catch(o){s=a.toDataURL("image/jpeg",ee),n=Math.round(.75*s.length)}t({url:s,size:n})}else s(new Error("Canvas context not available"))}catch(n){s(n)}},l.onerror=()=>s(new Error("Failed to load image")),l.src=URL.createObjectURL(e)}),[800,ee]),ae=s.useCallback(async e=>{_(!0),z(e);try{for(let s=0;s<e.length;s+=2){const a=e.slice(s,s+2);await Promise.all(a.map(async(e,a)=>{const r=`${s+a}`;try{M(e=>({...e,[r]:10})),M(e=>({...e,[r]:30}));const{url:s,size:a}=await se(e);M(e=>({...e,[r]:70}));const l=e.name.replace(/\.[^/.]+$/,"").toLowerCase(),o={id:Date.now().toString()+Math.random().toString(36).substr(2,9),url:s,name:e.name,size:a,answer:l};t(e=>{const t=[...e,o];return t.length>Q?(console.log(`Removing ${t.length-Q} oldest images to stay within limit`),t.slice(-100)):t}),M(e=>({...e,[r]:100})),setTimeout(()=>{M(e=>{const t={...e};return delete t[r],t})},1500)}catch(l){console.error("Error processing image:",e.name,l),M(e=>{const t={...e};return delete t[r],t})}})),s+2<e.length&&await new Promise(e=>setTimeout(e,200))}}finally{_(!1),z([])}},[se,t,Q]),re=s.useCallback(async e=>{const t=e.target.files;if(!t||0===t.length)return;const s=Array.from(t).filter(e=>{const t=e.type.startsWith("image/"),s=e.size<=10485760;return t||console.warn(`Skipping non-image file: ${e.name}`),s||console.warn(`Skipping oversized file: ${e.name} (${(e.size/1024/1024).toFixed(1)}MB)`),t&&s});0!==s.length?s.length>20?alert("Too many files selected. Please upload 20 or fewer images at once for optimal performance."):(await ae(s),Z.current&&(Z.current.value="")):alert("No valid image files selected. Please choose image files under 10MB each.")},[ae]),le=s.useCallback(e=>{t(t=>t.filter(t=>t.id!==e))},[t]),oe=s.useCallback(()=>{confirm("Are you sure you want to remove all images? This action cannot be undone.")&&t([])},[t]),ne=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},ie=Object.keys(L).length>0?Object.values(L).reduce((e,t)=>e+t,0)/Object.keys(L).length:0,ce=K.getStorageStats();return Y.jsx("div",{className:"min-h-screen p-6",children:Y.jsxs("div",{className:"max-w-6xl mx-auto",children:[Y.jsxs("div",{className:"flex items-center justify-between mb-8",children:[Y.jsxs("div",{className:"flex items-center gap-4",children:[Y.jsx("button",{onClick:k,className:"p-3 bg-gray-600/20 border border-gray-500/30 rounded-lg hover:bg-gray-600/30 transition-all duration-300",children:Y.jsx(c,{className:"w-5 h-5 text-gray-400"})}),Y.jsx("h1",{className:"text-3xl font-bold text-white",children:"Admin Panel"})]}),Y.jsxs("div",{className:"flex items-center gap-2",children:[Y.jsx("div",{className:"px-3 py-2 rounded-lg border "+(te.isNearLimit?"bg-yellow-600/20 border-yellow-500/30":"bg-green-600/20 border-green-500/30"),children:Y.jsx("span",{className:"text-sm font-medium "+(te.isNearLimit?"text-yellow-400":"text-green-400"),children:te.isNearLimit?"⚠️ Near Limit":"✓ Optimized"})}),Y.jsxs("button",{onClick:E,className:"p-3 bg-red-600/20 border border-red-500/30 rounded-lg hover:bg-red-600/30 transition-all duration-300 flex items-center gap-2",children:[Y.jsx(d,{className:"w-5 h-5 text-red-400"}),Y.jsx("span",{className:"text-red-400",children:"Logout"})]})]})]}),Y.jsx("div",{className:"flex gap-2 mb-8 overflow-x-auto",children:[{id:"images",label:"Image Management",icon:m},{id:"scores",label:"Score Management",icon:x},{id:"game-config",label:"Game Configuration",icon:g},{id:"settings",label:"System Settings",icon:u}].map(e=>{const t=e.icon;return Y.jsxs("button",{onClick:()=>P(e.id),className:"px-6 py-3 rounded-lg font-medium transition-all duration-300 flex items-center gap-2 whitespace-nowrap "+(C===e.id?"bg-blue-600/30 border border-blue-500/50 text-blue-300":"bg-black/20 border border-gray-600/30 text-gray-400 hover:bg-black/30"),children:[Y.jsx(t,{className:"w-4 h-4"}),e.label]},e.id)})}),"images"===C&&Y.jsxs("div",{className:"space-y-6",children:[Y.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-2xl p-8",children:[Y.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Y.jsx("h2",{className:"text-2xl font-bold text-white",children:"Upload Game Images"}),Y.jsxs("div",{className:"flex items-center gap-4",children:[Y.jsxs("div",{className:"text-blue-400 font-medium",children:[e.length,"/",Q," images"]}),Y.jsxs("div",{className:"text-sm text-gray-400",children:["Total: ",ne(te.totalSize)]}),Y.jsxs("div",{className:"text-sm text-purple-400",children:["Game Ready: ",te.readyForGame,"/",l.imagesPerGame]})]})]}),te.isNearLimit&&Y.jsx("div",{className:"mb-6 p-4 bg-yellow-600/10 border border-yellow-500/30 rounded-lg",children:Y.jsxs("div",{className:"flex items-center gap-2 text-yellow-400",children:[Y.jsx(h,{className:"w-5 h-5"}),Y.jsx("span",{className:"font-medium",children:"Storage Warning:"}),Y.jsxs("span",{children:["Approaching maximum image limit (",te.storageUsagePercent.toFixed(1),"% used). Oldest images will be automatically removed when limit is exceeded."]})]})}),O&&Y.jsxs("div",{className:"mb-6 p-4 bg-blue-600/10 border border-blue-500/30 rounded-lg",children:[Y.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Y.jsxs("span",{className:"text-blue-400 font-medium",children:["Processing Images... (",F.length," files)"]}),Y.jsxs("span",{className:"text-blue-400",children:[Math.round(ie),"%"]})]}),Y.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:Y.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${ie}%`}})}),Y.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Images are being optimized for better performance and storage efficiency"})]}),Y.jsxs("div",{className:"space-y-4",children:[Y.jsxs("div",{onClick:()=>!O&&Z.current?.click(),className:"border-2 border-dashed rounded-xl p-8 text-center transition-all duration-300 "+(O?"border-gray-500/30 cursor-not-allowed opacity-50":"border-blue-500/30 cursor-pointer hover:border-blue-400/50 hover:bg-blue-500/5"),children:[Y.jsx(m,{className:"w-12 h-12 mx-auto mb-4 "+(O?"text-gray-400":"text-blue-400")}),Y.jsx("p",{className:"font-medium mb-2 "+(O?"text-gray-400":"text-white"),children:O?"Processing images...":"Click to upload images"}),Y.jsx("p",{className:"text-gray-400 text-sm",children:"Support: JPG, PNG, GIF, WebP (Max 20 files, 10MB each)"}),Y.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Images are automatically optimized and compressed for optimal performance"})]}),Y.jsx("input",{ref:Z,type:"file",multiple:!0,accept:"image/*",onChange:re,disabled:O,className:"hidden"}),Y.jsxs("div",{className:"flex gap-4",children:[Y.jsx("button",{onClick:()=>!O&&Z.current?.click(),disabled:O,className:"px-6 py-3 bg-blue-600/20 border border-blue-500/30 rounded-lg text-blue-400 hover:bg-blue-600/30 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:O?"Processing...":"Add More Images"}),e.length>0&&Y.jsx("button",{onClick:oe,disabled:O,className:"px-6 py-3 bg-red-600/20 border border-red-500/30 rounded-lg text-red-400 hover:bg-red-600/30 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear All Images"})]})]})]}),e.length>0&&Y.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-purple-500/30 rounded-2xl p-8",children:[Y.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Y.jsxs("h3",{className:"text-xl font-bold text-white",children:["Uploaded Images (",e.length,")"]}),Y.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:Y.jsxs("div",{className:"flex items-center gap-2",children:[Y.jsx(b,{className:"w-4 h-4"}),Y.jsx("span",{children:"Optimized & Ready"})]})})]}),Y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 max-h-96 overflow-y-auto custom-scrollbar",children:e.map(e=>Y.jsxs("div",{className:"relative group bg-white/5 border border-gray-600/30 rounded-lg p-3",children:[Y.jsx("img",{src:e.url,alt:e.name,className:"w-full h-32 object-cover rounded-lg cursor-pointer hover:border-blue-400/50 transition-all duration-300",onClick:()=>R(e.url),loading:"lazy"}),Y.jsxs("div",{className:"absolute top-5 right-5 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex gap-2",children:[Y.jsx("button",{onClick:()=>R(e.url),className:"p-2 bg-blue-600/80 rounded-full hover:bg-blue-500 transition-colors",children:Y.jsx(i,{className:"w-4 h-4 text-white"})}),Y.jsx("button",{onClick:()=>le(e.id),className:"p-2 bg-red-600/80 rounded-full hover:bg-red-500 transition-colors",children:Y.jsx(p,{className:"w-4 h-4 text-white"})})]}),Y.jsxs("div",{className:"mt-2",children:[Y.jsx("p",{className:"text-xs text-gray-400 truncate",children:e.name}),Y.jsx("p",{className:"text-xs text-gray-500",children:ne(e.size||0)}),Y.jsxs("div",{className:"mt-2",children:[Y.jsx("label",{className:"text-xs text-green-400 block mb-1",children:"Answer:"}),V===e.id?Y.jsxs("div",{className:"flex gap-1",children:[Y.jsx("input",{type:"text",value:J,onChange:e=>q(e.target.value),className:"flex-1 p-1 bg-black/50 border border-green-500/30 rounded text-white text-xs",placeholder:"Correct answer",autoFocus:!0}),Y.jsx("button",{onClick:()=>{return s=e.id,J.trim()&&(t(e=>e.map(e=>e.id===s?{...e,answer:J.trim().toLowerCase()}:e)),console.log("Image answer updated")),H(null),void q("");var s},className:"p-1 bg-green-600/20 border border-green-500/30 rounded hover:bg-green-600/30 transition-colors",children:Y.jsx(f,{className:"w-3 h-3 text-green-400"})}),Y.jsx("button",{onClick:()=>H(null),className:"p-1 bg-gray-600/20 border border-gray-500/30 rounded hover:bg-gray-600/30 transition-colors",children:Y.jsx(j,{className:"w-3 h-3 text-gray-400"})})]}):Y.jsxs("div",{className:"flex items-center gap-1",children:[Y.jsx("span",{className:"text-xs text-white bg-green-600/20 px-2 py-1 rounded flex-1 truncate",children:e.answer||"No answer set"}),Y.jsx("button",{onClick:()=>{return t=e.id,s=e.answer||"",H(t),void q(s);var t,s},className:"p-1 bg-blue-600/20 border border-blue-500/30 rounded hover:bg-blue-600/30 transition-colors",children:Y.jsx(x,{className:"w-3 h-3 text-blue-400"})})]})]})]})]},e.id))})]})]}),"scores"===C&&Y.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-green-500/30 rounded-2xl p-8",children:[Y.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Y.jsx("h2",{className:"text-2xl font-bold text-white",children:"Player Scores"}),Y.jsxs("div",{className:"text-green-400 text-sm",children:["✓ Auto-saved • ",a.length," players stored"]})]}),0===a.length?Y.jsxs("div",{className:"text-center py-12 text-gray-400",children:[Y.jsx(x,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),Y.jsx("p",{children:"No player scores yet"}),Y.jsx("p",{className:"text-sm mt-2",children:"Scores will be automatically saved when players complete games"})]}):Y.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto custom-scrollbar",children:a.map(e=>Y.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 border border-gray-600/30 rounded-lg",children:[Y.jsxs("div",{children:[Y.jsx("p",{className:"text-white font-medium",children:e.name}),Y.jsx("p",{className:"text-gray-400 text-sm",children:new Date(e.timestamp).toLocaleString()}),Y.jsxs("div",{className:"flex gap-4 mt-1",children:[Y.jsxs("span",{className:"text-xs text-blue-400",children:["Auto Score: ",e.autoScore]}),Y.jsxs("span",{className:"text-xs text-green-400",children:["Final Score: ",e.score]})]})]}),Y.jsx("div",{className:"flex items-center gap-3",children:I===e.id?Y.jsxs("div",{className:"flex items-center gap-2",children:[Y.jsx("input",{type:"number",value:A,onChange:e=>D(e.target.value),className:"w-24 p-2 bg-black/50 border border-blue-500/30 rounded text-white text-center",min:"0",max:l.maxScore,step:"0.1",placeholder:`0.0-${l.maxScore}`,autoFocus:!0}),Y.jsx("button",{onClick:()=>(e=>{const t=parseFloat(A);!isNaN(t)&&t>=0&&t<=l.maxScore?(r(e,t),console.log("Score updated and will be automatically saved"),T(null),D("")):alert(`Please enter a valid score between 0.0 and ${l.maxScore}`)})(e.id),className:"p-2 bg-green-600/20 border border-green-500/30 rounded hover:bg-green-600/30 transition-colors",children:Y.jsx(f,{className:"w-4 h-4 text-green-400"})}),Y.jsx("button",{onClick:()=>T(null),className:"p-2 bg-gray-600/20 border border-gray-500/30 rounded hover:bg-gray-600/30 transition-colors",children:Y.jsx(j,{className:"w-4 h-4 text-gray-400"})})]}):Y.jsxs("div",{className:"flex items-center gap-3",children:[Y.jsxs("div",{className:"text-right",children:[Y.jsx("div",{className:"text-2xl font-bold text-blue-400",children:e.score.toFixed(1)}),Y.jsxs("div",{className:"text-xs text-gray-400",children:["/ ",l.maxScore]})]}),Y.jsx("button",{onClick:()=>{return t=e.id,s=e.score,T(t),void D(s.toString());var t,s},className:"p-2 bg-blue-600/20 border border-blue-500/30 rounded hover:bg-blue-600/30 transition-colors",children:Y.jsx(x,{className:"w-4 h-4 text-blue-400"})})]})})]},e.id))})]}),"game-config"===C&&Y.jsx("div",{className:"space-y-6",children:Y.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-purple-500/30 rounded-2xl p-8",children:[Y.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Y.jsx("h2",{className:"text-2xl font-bold text-white",children:"Game Configuration"}),Y.jsxs("div",{className:"flex gap-2",children:[Y.jsxs("button",{onClick:n,className:"px-4 py-2 bg-yellow-600/20 border border-yellow-500/30 rounded-lg text-yellow-400 hover:bg-yellow-600/30 transition-all duration-300 flex items-center gap-2",children:[Y.jsx(N,{className:"w-4 h-4"}),"Reset to Defaults"]}),Y.jsxs("button",{onClick:()=>{$.imageTimeLimit<5||$.imageTimeLimit>60?alert("Image time limit must be between 5 and 60 seconds"):$.totalGameTime<60||$.totalGameTime>1800?alert("Total game time must be between 1 and 30 minutes"):$.maxScore<10||$.maxScore>100?alert("Max score must be between 10 and 100 points"):$.imagesPerGame<10||$.imagesPerGame>100?alert("Images per game must be between 10 and 100"):$.pointsPerImage<.1||$.pointsPerImage>10?alert("Points per image must be between 0.1 and 10"):(o($),alert("Game settings saved successfully!"))},className:"px-4 py-2 bg-purple-600/20 border border-purple-500/30 rounded-lg text-purple-400 hover:bg-purple-600/30 transition-all duration-300 flex items-center gap-2",children:[Y.jsx(f,{className:"w-4 h-4"}),"Save Settings"]})]})]}),Y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[Y.jsxs("div",{className:"space-y-4",children:[Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-purple-300 font-medium mb-2",children:"Time per Image (seconds)"}),Y.jsx("input",{type:"number",value:$.imageTimeLimit,onChange:e=>W(t=>({...t,imageTimeLimit:parseInt(e.target.value)||10})),className:"w-full p-3 bg-black/50 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:outline-none focus:ring-2 focus:ring-purple-400/20",min:"5",max:"60"}),Y.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Range: 5-60 seconds"})]}),Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-purple-300 font-medium mb-2",children:"Total Game Time (seconds)"}),Y.jsx("input",{type:"number",value:$.totalGameTime,onChange:e=>W(t=>({...t,totalGameTime:parseInt(e.target.value)||300})),className:"w-full p-3 bg-black/50 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:outline-none focus:ring-2 focus:ring-purple-400/20",min:"60",max:"1800"}),Y.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Range: 60-1800 seconds (1-30 minutes)"})]}),Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-purple-300 font-medium mb-2",children:"Points per Correct Answer"}),Y.jsxs("div",{className:"flex items-center gap-2",children:[Y.jsx("button",{onClick:()=>W(e=>({...e,pointsPerImage:Math.max(.1,e.pointsPerImage-.1)})),className:"p-2 bg-red-600/20 border border-red-500/30 rounded hover:bg-red-600/30 transition-colors",children:Y.jsx(v,{className:"w-4 h-4 text-red-400"})}),Y.jsx("input",{type:"number",value:$.pointsPerImage,onChange:e=>W(t=>({...t,pointsPerImage:parseFloat(e.target.value)||1})),className:"flex-1 p-3 bg-black/50 border border-purple-500/30 rounded-lg text-white text-center focus:border-purple-400 focus:outline-none focus:ring-2 focus:ring-purple-400/20",min:"0.1",max:"10",step:"0.1"}),Y.jsx("button",{onClick:()=>W(e=>({...e,pointsPerImage:Math.min(10,e.pointsPerImage+.1)})),className:"p-2 bg-green-600/20 border border-green-500/30 rounded hover:bg-green-600/30 transition-colors",children:Y.jsx(y,{className:"w-4 h-4 text-green-400"})})]}),Y.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Range: 0.1-10 points per correct answer"})]})]}),Y.jsxs("div",{className:"space-y-4",children:[Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-purple-300 font-medium mb-2",children:"Maximum Score"}),Y.jsx("input",{type:"number",value:$.maxScore,onChange:e=>W(t=>({...t,maxScore:parseInt(e.target.value)||40})),className:"w-full p-3 bg-black/50 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:outline-none focus:ring-2 focus:ring-purple-400/20",min:"10",max:"100"}),Y.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Range: 10-100 points"})]}),Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-purple-300 font-medium mb-2",children:"Images per Game"}),Y.jsx("input",{type:"number",value:$.imagesPerGame,onChange:e=>W(t=>({...t,imagesPerGame:parseInt(e.target.value)||30})),className:"w-full p-3 bg-black/50 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:outline-none focus:ring-2 focus:ring-purple-400/20",min:"10",max:"100"}),Y.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Range: 10-100 images"})]})]})]}),Y.jsxs("div",{className:"mt-6 p-4 bg-purple-600/10 border border-purple-500/30 rounded-lg",children:[Y.jsx("h3",{className:"text-lg font-bold text-purple-400 mb-3",children:"Current Settings Preview"}),Y.jsxs("div",{className:"grid md:grid-cols-5 gap-4 text-sm",children:[Y.jsxs("div",{className:"text-center",children:[Y.jsxs("div",{className:"text-2xl font-bold text-purple-400",children:[$.imageTimeLimit,"s"]}),Y.jsx("div",{className:"text-gray-400",children:"Per Image"})]}),Y.jsxs("div",{className:"text-center",children:[Y.jsxs("div",{className:"text-2xl font-bold text-blue-400",children:[Math.floor($.totalGameTime/60),"m"]}),Y.jsx("div",{className:"text-gray-400",children:"Total Time"})]}),Y.jsxs("div",{className:"text-center",children:[Y.jsx("div",{className:"text-2xl font-bold text-green-400",children:$.maxScore}),Y.jsx("div",{className:"text-gray-400",children:"Max Score"})]}),Y.jsxs("div",{className:"text-center",children:[Y.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:$.imagesPerGame}),Y.jsx("div",{className:"text-gray-400",children:"Images"})]}),Y.jsxs("div",{className:"text-center",children:[Y.jsx("div",{className:"text-2xl font-bold text-orange-400",children:$.pointsPerImage}),Y.jsx("div",{className:"text-gray-400",children:"Points/Answer"})]})]})]})]})}),"settings"===C&&Y.jsxs("div",{className:"space-y-6",children:[Y.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-orange-500/30 rounded-2xl p-8",children:[Y.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"System Settings"}),Y.jsx("div",{className:"space-y-6",children:Y.jsxs("div",{children:[Y.jsx("h3",{className:"text-lg font-bold text-orange-400 mb-4",children:"Admin Login Credentials"}),Y.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-gray-300 font-medium mb-2",children:"Username"}),Y.jsx("input",{type:"text",value:B.username,onChange:e=>U(t=>({...t,username:e.target.value})),className:"w-full p-3 bg-black/50 border border-orange-500/30 rounded-lg text-white focus:border-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-400/20"})]}),Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-gray-300 font-medium mb-2",children:"Password"}),Y.jsx("input",{type:"password",value:B.password,onChange:e=>U(t=>({...t,password:e.target.value})),className:"w-full p-3 bg-black/50 border border-orange-500/30 rounded-lg text-white focus:border-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-400/20"})]})]}),Y.jsx("button",{onClick:()=>{K.saveData("image-spotter-credentials",B)?alert("Credentials updated successfully! Note: Changes are saved locally on this device only."):alert("Failed to save credentials. Please try again.")},className:"mt-4 px-6 py-3 bg-orange-600/20 border border-orange-500/30 rounded-lg text-orange-400 hover:bg-orange-600/30 transition-all duration-300",children:"Save Credentials"}),Y.jsx("div",{className:"mt-4 p-3 bg-yellow-600/10 border border-yellow-500/30 rounded-lg",children:Y.jsxs("p",{className:"text-yellow-400 text-sm",children:[Y.jsx("strong",{children:"Important:"})," Credential changes are saved locally on this device only. On other devices, the default credentials (admin/spotter2024) will be used."]})}),Y.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Note: Developer access credentials are separate and cannot be changed here."})]})})]}),Y.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-purple-500/30 rounded-2xl p-8",children:[Y.jsx("h3",{className:"text-lg font-bold text-purple-400 mb-4",children:"Data Backup & Recovery"}),Y.jsxs("div",{className:"space-y-4",children:[Y.jsxs("div",{className:"flex gap-4",children:[Y.jsxs("button",{onClick:e=>{e.preventDefault(),e.stopPropagation();try{const e=K.exportAllData(),t=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`image-spotter-backup-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),alert("Backup exported successfully!")}catch(t){console.error("Export failed:",t),alert("Failed to export backup. Please try again.")}},className:"px-6 py-3 bg-purple-600/20 border border-purple-500/30 rounded-lg text-purple-400 hover:bg-purple-600/30 transition-all duration-300 flex items-center gap-2",children:[Y.jsx(w,{className:"w-4 h-4"}),"Export Backup"]}),Y.jsxs("button",{onClick:()=>X.current?.click(),className:"px-6 py-3 bg-blue-600/20 border border-blue-500/30 rounded-lg text-blue-400 hover:bg-blue-600/30 transition-all duration-300 flex items-center gap-2",children:[Y.jsx(S,{className:"w-4 h-4"}),"Import Backup"]})]}),Y.jsx("input",{ref:X,type:"file",accept:".json",onChange:e=>{e.preventDefault(),e.stopPropagation();const t=e.target.files?.[0];if(!t)return;const s=new FileReader;s.onload=e=>{try{const t=e.target?.result;K.importAllData(t)?(alert("Backup imported successfully! Please refresh the page to see the changes."),window.location.reload()):alert("Failed to import backup. Please check the file format.")}catch(t){console.error("Import failed:",t),alert("Failed to import backup. Invalid file format.")}},s.readAsText(t),X.current&&(X.current.value="")},className:"hidden"}),Y.jsx("p",{className:"text-gray-400 text-sm",children:"Export creates a complete backup of all players, scores, images, and game settings. Import restores data from a backup file."})]})]}),Y.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-2xl p-8",children:[Y.jsx("h3",{className:"text-lg font-bold text-blue-400 mb-4",children:"System Statistics"}),Y.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[Y.jsxs("div",{className:"p-4 bg-blue-600/10 border border-blue-500/30 rounded-lg",children:[Y.jsx("div",{className:"text-2xl font-bold text-blue-400",children:e.length}),Y.jsx("div",{className:"text-gray-400",children:"Images Stored"})]}),Y.jsxs("div",{className:"p-4 bg-green-600/10 border border-green-500/30 rounded-lg",children:[Y.jsx("div",{className:"text-2xl font-bold text-green-400",children:a.length}),Y.jsx("div",{className:"text-gray-400",children:"Players Recorded"})]}),Y.jsxs("div",{className:"p-4 bg-purple-600/10 border border-purple-500/30 rounded-lg",children:[Y.jsx("div",{className:"text-2xl font-bold text-purple-400",children:a.length>0?Math.max(...a.map(e=>e.score)).toFixed(1):"0.0"}),Y.jsx("div",{className:"text-gray-400",children:"Highest Score"})]}),Y.jsxs("div",{className:"p-4 bg-yellow-600/10 border border-yellow-500/30 rounded-lg",children:[Y.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:ne(ce.used)}),Y.jsx("div",{className:"text-gray-400",children:"Storage Used"})]})]})]})]}),G&&Y.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-6",onClick:()=>R(null),children:Y.jsxs("div",{className:"relative max-w-4xl max-h-full",children:[Y.jsx("img",{src:G,alt:"Preview",className:"max-w-full max-h-full object-contain rounded-lg"}),Y.jsx("button",{onClick:()=>R(null),className:"absolute top-4 right-4 p-2 bg-black/50 rounded-full hover:bg-black/70 transition-colors",children:Y.jsx(j,{className:"w-6 h-6 text-white"})})]})})]})})},H=({playerName:e,gameImages:t,gameSettings:a,onGameComplete:r,onBack:l})=>{const[o,n]=s.useState(0),[i,d]=s.useState(a.totalGameTime),[m,x]=s.useState(a.imageTimeLimit),[u,h]=s.useState([]),[b,p]=s.useState(""),[f,j]=s.useState(!1),[N,v]=s.useState(!1),[y,w]=s.useState(!1),[S,I]=s.useState(""),[T,A]=s.useState([]),[D,G]=s.useState(0),[R,L]=s.useState([]),M=s.useRef(null);s.useEffect(()=>{const e=[...t].sort(()=>Math.random()-.5);A(e.slice(0,a.imagesPerGame))},[t,a.imagesPerGame]),s.useEffect(()=>{if(!f||N)return;const e=setInterval(()=>{d(e=>e<=1?(z(),0):e-1),x(e=>e<=1?(F(),a.imageTimeLimit):e-1)},1e3);return()=>clearInterval(e)},[f,N,o,a.imageTimeLimit]);const O=()=>{j(!0),M.current?.focus()},_=(e,t)=>{if(!e||!t)return!1;const s=e=>e.toLowerCase().trim().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g," "),a=s(e),r=s(t);if(a===r)return!0;if(a.includes(r)||r.includes(a)){return Math.min(a.length,r.length)/Math.max(a.length,r.length)>=.6}const l=a.split(" ").filter(e=>e.length>2),o=r.split(" ").filter(e=>e.length>2);if(l.length>0&&o.length>0){return l.filter(e=>o.some(t=>e.includes(t)||t.includes(e))).length/Math.max(l.length,o.length)>=.5}return!1},F=()=>{const e=T[o],t=!!b.trim()&&_(b,e?.answer||"");h(e=>[...e,b]),L(e=>[...e,t]),t&&G(e=>e+a.pointsPerImage),p(""),o>=a.imagesPerGame-1||o>=T.length-1?z():(n(e=>e+1),x(a.imageTimeLimit),setTimeout(()=>M.current?.focus(),100))},z=()=>{if(v(!0),w(!0),b.trim()){const e=T[o],t=_(b,e?.answer||"");h(e=>[...e,b]),L(e=>[...e,t]),t&&G(e=>e+a.pointsPerImage)}},B=()=>{const e=S.trim()?parseFloat(S):D;!isNaN(e)&&e>=0&&e<=a.maxScore?r(e,D):alert(`Please enter a valid score between 0.0 and ${a.maxScore} or leave empty to use auto score`)};if(!f)return Y.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:Y.jsx("div",{className:"max-w-2xl w-full text-center",children:Y.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-2xl p-12",children:[Y.jsxs("div",{className:"mb-8",children:[Y.jsx(k,{className:"w-16 h-16 text-blue-400 mx-auto mb-4"}),Y.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Ready to Play?"}),Y.jsxs("p",{className:"text-xl text-blue-300 mb-2",children:["Welcome, ",e,"!"]}),Y.jsxs("p",{className:"text-gray-400",children:["You'll see ",a.imagesPerGame," random images"]})]}),Y.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8 text-left",children:[Y.jsxs("div",{className:"p-4 bg-blue-600/10 border border-blue-500/30 rounded-lg",children:[Y.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Y.jsx(g,{className:"w-5 h-5 text-blue-400"}),Y.jsx("span",{className:"text-blue-400 font-semibold",children:"Time Limits"})]}),Y.jsxs("p",{className:"text-gray-300 text-sm",children:[Math.floor(a.totalGameTime/60)," minutes total"]}),Y.jsxs("p",{className:"text-gray-300 text-sm",children:[a.imageTimeLimit," seconds per image"]})]}),Y.jsxs("div",{className:"p-4 bg-purple-600/10 border border-purple-500/30 rounded-lg",children:[Y.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Y.jsx(E,{className:"w-5 h-5 text-purple-400"}),Y.jsx("span",{className:"text-purple-400 font-semibold",children:"Scoring"})]}),Y.jsxs("p",{className:"text-gray-300 text-sm",children:["Auto: ",a.pointsPerImage," point per correct answer"]}),Y.jsxs("p",{className:"text-gray-300 text-sm",children:["Max: ",a.maxScore," points (admin adjustable)"]})]})]}),Y.jsxs("div",{className:"flex gap-4 justify-center",children:[Y.jsxs("button",{onClick:l,className:"px-6 py-3 bg-gray-600/20 border border-gray-500/30 rounded-lg text-gray-400 hover:bg-gray-600/30 transition-all duration-300 flex items-center gap-2",children:[Y.jsx(c,{className:"w-4 h-4"}),"Back"]}),Y.jsx("button",{onClick:O,className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg font-bold text-white hover:from-blue-500 hover:to-purple-500 transition-all duration-300 transform hover:scale-105",children:"🚀 Start Game"})]})]})})});if(y)return Y.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:Y.jsx("div",{className:"max-w-2xl w-full text-center",children:Y.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-yellow-500/30 rounded-2xl p-12",children:[Y.jsxs("div",{className:"mb-8",children:[Y.jsx("div",{className:"text-6xl font-bold bg-gradient-to-r from-red-500 via-yellow-500 to-red-500 bg-clip-text text-transparent mb-4 animate-pulse",children:"GAME OVER"}),Y.jsxs("div",{className:"text-2xl text-white mb-2",children:["Great job, ",e,"!"]}),Y.jsxs("div",{className:"text-gray-400",children:["Answered: ",u.length," / ",Math.min(a.imagesPerGame,T.length)," images"]})]}),Y.jsxs("div",{className:"bg-blue-600/10 border border-blue-500/30 rounded-xl p-6 mb-6",children:[Y.jsx("h3",{className:"text-lg font-bold text-blue-400 mb-4",children:"Score Summary"}),Y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Y.jsxs("div",{className:"text-center",children:[Y.jsx("div",{className:"text-3xl font-bold text-green-400",children:D.toFixed(1)}),Y.jsx("div",{className:"text-sm text-gray-400",children:"Auto Score"}),Y.jsxs("div",{className:"text-xs text-gray-500",children:[R.filter(Boolean).length," correct answers"]})]}),Y.jsxs("div",{className:"text-center",children:[Y.jsx("div",{className:"text-3xl font-bold text-purple-400",children:a.maxScore}),Y.jsx("div",{className:"text-sm text-gray-400",children:"Maximum Possible"}),Y.jsx("div",{className:"text-xs text-gray-500",children:"Admin adjustable"})]})]})]}),Y.jsxs("div",{className:"bg-orange-600/10 border border-orange-500/30 rounded-xl p-6 mb-6",children:[Y.jsx("h3",{className:"text-lg font-bold text-orange-400 mb-4",children:"Game Incharge: Final Score Entry"}),Y.jsxs("div",{className:"flex gap-3 justify-center items-center",children:[Y.jsx("input",{type:"number",value:S,onChange:e=>I(e.target.value),placeholder:`Leave empty for auto score (${D.toFixed(1)})`,className:"w-64 p-3 bg-black/50 border border-orange-500/30 rounded-lg text-white text-center focus:border-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-400/20",min:"0",max:a.maxScore,step:"0.1"}),Y.jsxs("span",{className:"text-orange-400 font-medium",children:["/ ",a.maxScore]}),Y.jsx("button",{onClick:B,className:"px-6 py-3 bg-orange-600/20 border border-orange-500/30 rounded-lg text-orange-400 hover:bg-orange-600/30 transition-all duration-300 font-medium",children:"Submit Final Score"})]}),Y.jsxs("p",{className:"text-gray-400 text-sm mt-2",children:["Leave empty to use auto score (",D.toFixed(1),") or enter custom score (0.0 to ",a.maxScore,")"]})]}),Y.jsx("button",{onClick:()=>w(!1),className:"px-6 py-3 bg-gray-600/20 border border-gray-500/30 rounded-lg text-gray-400 hover:bg-gray-600/30 transition-all duration-300",children:"View Detailed Results"})]})})});if(N)return Y.jsx("div",{className:"min-h-screen p-6",children:Y.jsx("div",{className:"max-w-4xl mx-auto",children:Y.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-green-500/30 rounded-2xl p-8",children:[Y.jsx("h2",{className:"text-2xl font-bold text-green-400 mb-6",children:"Detailed Results Review"}),Y.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:T.slice(0,u.length).map((e,t)=>Y.jsxs("div",{className:"bg-white/5 border border-gray-600/30 rounded-lg p-4",children:[Y.jsx("img",{src:e.url,alt:`Question ${t+1}`,className:"w-full h-32 object-cover rounded-lg mb-3",loading:"lazy"}),Y.jsxs("div",{className:"text-sm space-y-2",children:[Y.jsxs("p",{className:"text-gray-400",children:["Question ",t+1,":"]}),Y.jsxs("div",{className:"flex items-center gap-2",children:[R[t]?Y.jsx(C,{className:"w-4 h-4 text-green-400"}):Y.jsx(P,{className:"w-4 h-4 text-red-400"}),Y.jsx("span",{className:"font-medium "+(R[t]?"text-green-400":"text-red-400"),children:R[t]?"Correct":"Incorrect"})]}),Y.jsxs("p",{className:"text-white",children:['Your answer: "',u[t]||"No answer",'"']}),Y.jsxs("p",{className:"text-blue-400",children:['Correct answer: "',e.answer,'"']}),R[t]&&Y.jsxs("p",{className:"text-green-400 text-xs",children:["+",a.pointsPerImage," points"]})]})]},e.id))}),Y.jsxs("div",{className:"flex justify-center mt-8 gap-4",children:[Y.jsx("button",{onClick:()=>w(!0),className:"px-6 py-3 bg-blue-600/20 border border-blue-500/30 rounded-lg text-blue-400 hover:bg-blue-600/30 transition-all duration-300",children:"Back to Score Entry"}),Y.jsx("div",{className:"px-6 py-3 bg-green-600/20 border border-green-500/30 rounded-lg",children:Y.jsxs("span",{className:"text-green-400 font-medium",children:["Final Auto Score: ",D.toFixed(1)," / ",a.maxScore]})})]})]})})});const U=T[o];return Y.jsx("div",{className:"min-h-screen p-6",children:Y.jsxs("div",{className:"max-w-4xl mx-auto",children:[Y.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-2xl p-6 mb-6",children:[Y.jsxs("div",{className:"flex items-center justify-between",children:[Y.jsxs("div",{className:"flex items-center gap-4",children:[Y.jsx("h2",{className:"text-xl font-bold text-white",children:e}),Y.jsxs("div",{className:"text-blue-400",children:["Image ",o+1," of ",Math.min(a.imagesPerGame,T.length)]})]}),Y.jsxs("div",{className:"flex items-center gap-6",children:[Y.jsxs("div",{className:"flex items-center gap-2",children:[Y.jsx(g,{className:"w-5 h-5 text-yellow-400"}),Y.jsx("span",{className:"text-white font-mono text-lg",children:($=i,`${Math.floor($/60)}:${($%60).toString().padStart(2,"0")}`)})]}),Y.jsxs("div",{className:"text-center",children:[Y.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Image Timer"}),Y.jsxs("div",{className:"text-lg font-bold "+(m<=3?"text-red-400":"text-green-400"),children:[m,"s"]})]}),Y.jsxs("div",{className:"text-center",children:[Y.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Auto Score"}),Y.jsx("div",{className:"text-lg font-bold text-purple-400",children:D.toFixed(1)})]})]})]}),Y.jsx("div",{className:"mt-4",children:Y.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:Y.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-300",style:{width:(o+1)/Math.min(a.imagesPerGame,T.length)*100+"%"}})})})]}),Y.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[Y.jsx("div",{className:"bg-black/40 backdrop-blur-sm border border-purple-500/30 rounded-2xl p-8",children:Y.jsxs("div",{className:"text-center",children:[Y.jsx("h3",{className:"text-lg font-bold text-purple-400 mb-4",children:"What is this?"}),U&&Y.jsxs("div",{className:"relative",children:[Y.jsx("img",{src:U.url,alt:`Image ${o+1}`,className:"w-full max-h-80 object-contain rounded-lg border border-gray-600/30",loading:"lazy"}),Y.jsx("div",{className:"absolute top-4 right-4",children:Y.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg "+(m<=3?"bg-red-500/80 text-white animate-pulse":"bg-green-500/80 text-white"),children:m})})]})]})}),Y.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-green-500/30 rounded-2xl p-8",children:[Y.jsx("h3",{className:"text-lg font-bold text-green-400 mb-4",children:"Your Answer"}),Y.jsxs("div",{className:"space-y-4",children:[Y.jsx("input",{ref:M,type:"text",value:b,onChange:e=>p(e.target.value),onKeyPress:e=>"Enter"===e.key&&F(),placeholder:"Type what you see...",className:"w-full p-4 bg-black/50 border border-green-500/30 rounded-lg text-white placeholder-gray-400 focus:border-green-400 focus:outline-none focus:ring-2 focus:ring-green-400/20 transition-all duration-300 text-lg"}),Y.jsxs("div",{className:"flex gap-3",children:[Y.jsx("button",{onClick:F,className:"flex-1 py-3 bg-gradient-to-r from-green-600 to-blue-600 rounded-lg font-bold text-white hover:from-green-500 hover:to-blue-500 transition-all duration-300",children:"Submit Answer"}),Y.jsx("button",{onClick:()=>{p(""),F()},className:"px-6 py-3 bg-yellow-600/20 border border-yellow-500/30 rounded-lg text-yellow-400 hover:bg-yellow-600/30 transition-all duration-300",children:"Skip"})]})]}),Y.jsx("div",{className:"mt-6 p-4 bg-white/5 rounded-lg",children:Y.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[Y.jsxs("div",{children:[Y.jsx("div",{className:"text-2xl font-bold text-blue-400",children:u.length}),Y.jsx("div",{className:"text-xs text-gray-400",children:"Answered"})]}),Y.jsxs("div",{children:[Y.jsx("div",{className:"text-2xl font-bold text-green-400",children:R.filter(Boolean).length}),Y.jsx("div",{className:"text-xs text-gray-400",children:"Correct"})]}),Y.jsxs("div",{children:[Y.jsx("div",{className:"text-2xl font-bold text-purple-400",children:Math.min(a.imagesPerGame,T.length)-o}),Y.jsx("div",{className:"text-xs text-gray-400",children:"Remaining"})]})]})})]})]})]})});var $},J=({players:e,gameSettings:t,onBack:s})=>{const a=e=>{switch(e){case 1:return Y.jsx(A,{className:"w-6 h-6 text-yellow-400"});case 2:return Y.jsx(T,{className:"w-6 h-6 text-gray-300"});case 3:return Y.jsx(D,{className:"w-6 h-6 text-orange-400"});default:return Y.jsx(G,{className:"w-6 h-6 text-blue-400"})}},r=e=>{switch(e){case 1:return"from-yellow-600/20 to-orange-600/20 border-yellow-500/30";case 2:return"from-gray-600/20 to-gray-500/20 border-gray-400/30";case 3:return"from-orange-600/20 to-red-600/20 border-orange-500/30";default:return"from-blue-600/10 to-purple-600/10 border-blue-500/20"}};return Y.jsx("div",{className:"min-h-screen p-6",children:Y.jsxs("div",{className:"max-w-4xl mx-auto",children:[Y.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[Y.jsx("button",{onClick:s,className:"p-3 bg-gray-600/20 border border-gray-500/30 rounded-lg hover:bg-gray-600/30 transition-all duration-300",children:Y.jsx(c,{className:"w-5 h-5 text-gray-400"})}),Y.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 bg-clip-text text-transparent",children:"🏆 Leaderboard"})]}),0===e.length?Y.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-12 text-center",children:[Y.jsx(I,{className:"w-16 h-16 text-gray-400 mx-auto mb-4 opacity-50"}),Y.jsx("h2",{className:"text-2xl font-bold text-gray-400 mb-2",children:"No Champions Yet!"}),Y.jsx("p",{className:"text-gray-500",children:"Be the first to complete the Image Spotter challenge!"})]}):Y.jsxs("div",{className:"space-y-4",children:[e.length>=3&&Y.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-8",children:[Y.jsx("div",{className:"order-1 md:order-1",children:Y.jsxs("div",{className:"bg-gradient-to-br from-gray-600/20 to-gray-500/20 border border-gray-400/30 rounded-2xl p-6 text-center h-40 flex flex-col justify-center",children:[Y.jsx(T,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),Y.jsx("div",{className:"text-lg font-bold text-white",children:e[1].name}),Y.jsx("div",{className:"text-2xl font-bold text-gray-300",children:e[1].score.toFixed(1)}),Y.jsxs("div",{className:"text-xs text-gray-400",children:["Auto: ",e[1].autoScore.toFixed(1)]}),Y.jsx("div",{className:"text-sm text-gray-400",children:"#2"})]})}),Y.jsx("div",{className:"order-2 md:order-2",children:Y.jsxs("div",{className:"bg-gradient-to-br from-yellow-600/30 to-orange-600/30 border border-yellow-500/50 rounded-2xl p-6 text-center h-48 flex flex-col justify-center relative overflow-hidden",children:[Y.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-yellow-400/10 to-orange-400/10 animate-pulse"}),Y.jsx(A,{className:"w-12 h-12 text-yellow-400 mx-auto mb-3 relative z-10"}),Y.jsx("div",{className:"text-xl font-bold text-white relative z-10",children:e[0].name}),Y.jsx("div",{className:"text-3xl font-bold text-yellow-400 relative z-10",children:e[0].score.toFixed(1)}),Y.jsxs("div",{className:"text-xs text-yellow-300 relative z-10",children:["Auto: ",e[0].autoScore.toFixed(1)]}),Y.jsx("div",{className:"text-sm text-yellow-300 relative z-10",children:"👑 CHAMPION"})]})}),Y.jsx("div",{className:"order-3 md:order-3",children:Y.jsxs("div",{className:"bg-gradient-to-br from-orange-600/20 to-red-600/20 border border-orange-500/30 rounded-2xl p-6 text-center h-40 flex flex-col justify-center",children:[Y.jsx(D,{className:"w-8 h-8 text-orange-400 mx-auto mb-2"}),Y.jsx("div",{className:"text-lg font-bold text-white",children:e[2].name}),Y.jsx("div",{className:"text-2xl font-bold text-orange-400",children:e[2].score.toFixed(1)}),Y.jsxs("div",{className:"text-xs text-orange-300",children:["Auto: ",e[2].autoScore.toFixed(1)]}),Y.jsx("div",{className:"text-sm text-orange-300",children:"#3"})]})})]}),Y.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-2xl p-8",children:[Y.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[Y.jsx(I,{className:"w-6 h-6 text-yellow-400"}),"Complete Rankings"]}),Y.jsx("div",{className:"space-y-3",children:e.map((e,s)=>{const l=s+1;return Y.jsxs("div",{className:`flex items-center justify-between p-6 rounded-xl bg-gradient-to-r border transition-all duration-300 hover:scale-[1.02] ${1===l?"from-yellow-600/20 to-orange-600/20 border-yellow-500/50 shadow-lg shadow-yellow-500/10":r(l)}`,children:[Y.jsxs("div",{className:"flex items-center gap-4",children:[Y.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-black/30",children:a(l)}),Y.jsxs("div",{children:[Y.jsxs("div",{className:"flex items-center gap-2",children:[Y.jsxs("span",{className:"text-2xl font-bold "+(1===l?"text-yellow-400":2===l?"text-gray-300":3===l?"text-orange-400":"text-blue-400"),children:["#",l]}),Y.jsx("span",{className:"text-xl font-bold text-white",children:e.name}),1===l&&Y.jsxs("div",{className:"flex items-center gap-1",children:[Y.jsx(A,{className:"w-5 h-5 text-yellow-400"}),Y.jsx("span",{className:"text-yellow-400 text-sm font-medium",children:"CHAMPION"})]})]}),Y.jsxs("div",{className:"text-gray-400 text-sm",children:[new Date(e.timestamp).toLocaleDateString()," at"," ",new Date(e.timestamp).toLocaleTimeString()]}),Y.jsxs("div",{className:"flex gap-4 mt-1",children:[Y.jsxs("span",{className:"text-xs text-blue-400",children:["Auto Score: ",e.autoScore.toFixed(1)]}),Y.jsxs("span",{className:"text-xs text-green-400",children:["Final Score: ",e.score.toFixed(1)]})]})]})]}),Y.jsxs("div",{className:"text-right",children:[Y.jsx("div",{className:"text-3xl font-bold "+(1===l?"text-yellow-400":2===l?"text-gray-300":3===l?"text-orange-400":"text-blue-400"),children:e.score.toFixed(1)}),Y.jsxs("div",{className:"text-gray-400 text-sm",children:["/ ",t.maxScore," points"]}),Y.jsx("div",{className:"text-xs text-gray-500",children:e.score!==e.autoScore?"Admin Adjusted":"Auto Score"})]})]},e.id)})})]}),Y.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[Y.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-green-500/30 rounded-xl p-6 text-center",children:[Y.jsx("div",{className:"text-2xl font-bold text-green-400",children:e.length}),Y.jsx("div",{className:"text-gray-400",children:"Total Players"})]}),Y.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-xl p-6 text-center",children:[Y.jsx("div",{className:"text-2xl font-bold text-blue-400",children:e.length>0?(e.reduce((e,t)=>e+t.score,0)/e.length).toFixed(1):"0.0"}),Y.jsx("div",{className:"text-gray-400",children:"Average Score"})]}),Y.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-purple-500/30 rounded-xl p-6 text-center",children:[Y.jsx("div",{className:"text-2xl font-bold text-purple-400",children:e.length>0?Math.max(...e.map(e=>e.score)).toFixed(1):"0.0"}),Y.jsx("div",{className:"text-gray-400",children:"Highest Score"})]}),Y.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-orange-500/30 rounded-xl p-6 text-center",children:[Y.jsx("div",{className:"text-2xl font-bold text-orange-400",children:e.length>0?(e.reduce((e,t)=>e+t.autoScore,0)/e.length).toFixed(1):"0.0"}),Y.jsx("div",{className:"text-gray-400",children:"Avg Auto Score"})]})]})]})]})})},q=()=>{const e=s.useRef(null);return s.useEffect(()=>{const t=e.current;if(!t)return;const s=t.getContext("2d");if(!s)return;t.width=window.innerWidth,t.height=window.innerHeight;const a=[];for(let e=0;e<200;e++)a.push({x:Math.random()*t.width,y:Math.random()*t.height,size:2*Math.random()+.5,opacity:Math.random(),speed:.5*Math.random()+.1,twinkleSpeed:.02*Math.random()+.005,twinklePhase:Math.random()*Math.PI*2});let r;const l=()=>{const e=s.createLinearGradient(0,0,0,t.height);e.addColorStop(0,"#0a0a1a"),e.addColorStop(.5,"#1a0a2a"),e.addColorStop(1,"#2a0a3a"),s.fillStyle=e,s.fillRect(0,0,t.width,t.height),a.forEach(e=>{e.y+=e.speed,e.y>t.height&&(e.y=-5,e.x=Math.random()*t.width),e.twinklePhase+=e.twinkleSpeed;const a=.5*Math.sin(e.twinklePhase)+.5,r=e.opacity*a;s.beginPath();const l=s.createRadialGradient(e.x,e.y,0,e.x,e.y,3*e.size);l.addColorStop(0,`rgba(255, 255, 255, ${r})`),l.addColorStop(.5,`rgba(100, 150, 255, ${.5*r})`),l.addColorStop(1,"rgba(100, 150, 255, 0)"),s.fillStyle=l,s.arc(e.x,e.y,3*e.size,0,2*Math.PI),s.fill(),s.beginPath(),s.fillStyle=`rgba(255, 255, 255, ${r})`,s.arc(e.x,e.y,e.size,0,2*Math.PI),s.fill()});const o=s.createRadialGradient(.3*t.width,.7*t.height,0,.3*t.width,.7*t.height,.8*t.width);o.addColorStop(0,"rgba(100, 50, 150, 0.1)"),o.addColorStop(.5,"rgba(50, 100, 200, 0.05)"),o.addColorStop(1,"rgba(0, 50, 100, 0)"),s.fillStyle=o,s.fillRect(0,0,t.width,t.height),r=requestAnimationFrame(l)},o=()=>{t.width=window.innerWidth,t.height=window.innerHeight};return window.addEventListener("resize",o),l(),()=>{window.removeEventListener("resize",o),cancelAnimationFrame(r)}},[]),Y.jsx("canvas",{ref:e,className:"fixed top-0 left-0 w-full h-full -z-10",style:{background:"radial-gradient(ellipse at center, #1a0a2a 0%, #0a0a1a 100%)"}})};function Z(){const[e,t]=s.useState(!1),[l,o]=s.useState("home"),[n,i]=s.useState(""),[c,m]=s.useState("VIT Chennai Clubs"),[x,h]=s.useState([]),[b,p]=s.useState([]),[f,j]=s.useState({imageTimeLimit:10,totalGameTime:300,maxScore:40,imagesPerGame:30,pointsPerImage:1}),[N,v]=s.useState(!1),[y,w]=s.useState(null),[S,k]=s.useState(!1);s.useEffect(()=>{(async()=>{try{console.log("Loading persisted data...");const e=K.loadData("image-spotter-players",[]);console.log("Loaded players:",e.length),h(e);const t=K.loadData("image-spotter-images",[]);console.log("Loaded images:",t.length),p(t);const s=K.loadData("image-spotter-game-settings",{imageTimeLimit:10,totalGameTime:300,maxScore:40,imagesPerGame:30,pointsPerImage:1});j(s),k(!0),console.log("Data loading completed successfully")}catch(e){console.error("Error loading persisted data:",e),h([]),p([]),j({imageTimeLimit:10,totalGameTime:300,maxScore:40,imagesPerGame:30,pointsPerImage:1}),k(!0)}})()},[]),s.useEffect(()=>{if(!S)return;const e=setTimeout(async()=>{try{K.saveData("image-spotter-players",x)?console.log("Players data saved successfully:",x.length,"players"):console.error("Failed to save players data")}catch(e){console.error("Error saving players data:",e)}},500);return()=>clearTimeout(e)},[x,S]),s.useEffect(()=>{if(!S)return;const e=setTimeout(async()=>{try{K.saveData("image-spotter-images",b)?console.log("Images data saved successfully:",b.length,"images"):console.error("Failed to save images data")}catch(e){console.error("Error saving images data:",e)}},1e3);return()=>clearTimeout(e)},[b,S]),s.useEffect(()=>{if(!S)return;const e=setTimeout(async()=>{try{K.saveData("image-spotter-game-settings",f)&&console.log("Game settings saved successfully")}catch(e){console.error("Error saving game settings:",e)}},500);return()=>clearTimeout(e)},[f,S]),s.useEffect(()=>{const e=setInterval(()=>{(x.length>0||b.length>0)&&(console.log("Performing periodic backup..."),K.saveData("image-spotter-players",x),K.saveData("image-spotter-images",b),K.saveData("image-spotter-game-settings",f))},3e5);return()=>clearInterval(e)},[x,b,f]),s.useEffect(()=>{const e=()=>{try{K.saveData("image-spotter-players",x),K.saveData("image-spotter-images",b),K.saveData("image-spotter-game-settings",f),console.log("Data saved before page unload")}catch(e){console.error("Error saving data before unload:",e)}};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[x,b,f]);const E=e=>{t(!0),m(e)},C=()=>{t(!1),o("home"),m("VIT Chennai Clubs")},P=()=>{if(!n.trim())return void alert("Please enter your name to start the game!");if(b.length<f.imagesPerGame)return void alert(`Not enough images uploaded yet. Need ${f.imagesPerGame} images. Please contact the game admin.`);const e=Date.now().toString();w(e),o("game")},T=(e,t)=>{if(y){const s={id:y,name:n,score:e,autoScore:t,timestamp:Date.now()};h(e=>{const t=[...e,s].sort((e,t)=>t.score-e.score);return console.log("New player added:",s.name,"Score:",s.score,"Auto Score:",s.autoScore),t})}o("home"),i(""),w(null)},A=(e,t)=>{h(s=>{const a=s.map(s=>s.id===e?{...s,score:t}:s).sort((e,t)=>t.score-e.score);return console.log("Player score updated:",e,"New score:",t),a})},D=e=>{j(e)},G=()=>{const e={imageTimeLimit:10,totalGameTime:300,maxScore:40,imagesPerGame:30,pointsPerImage:1};j(e),K.saveData("image-spotter-game-settings",e),alert("Game settings reset to default values and saved!")};return S?e?"admin"===l?Y.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[Y.jsx(q,{}),Y.jsx(V,{gameImages:b,setGameImages:p,players:x,updatePlayerScore:A,gameSettings:f,updateGameSettings:D,resetToDefaults:G,onBack:()=>o("home"),onLogout:C})]}):"game"===l?Y.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[Y.jsx(q,{}),Y.jsx(H,{playerName:n,gameImages:b,gameSettings:f,onGameComplete:T,onBack:()=>o("home")})]}):"leaderboard"===l?Y.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[Y.jsx(q,{}),Y.jsx(J,{players:x,gameSettings:f,onBack:()=>o("home")})]}):Y.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[Y.jsx(q,{}),Y.jsx("div",{className:"relative z-10 p-6",children:Y.jsxs("div",{className:"max-w-6xl mx-auto",children:[Y.jsxs("div",{className:"flex justify-between items-center mb-8",children:[Y.jsxs("div",{className:"text-center flex-1",children:[Y.jsxs("div",{className:"flex items-center justify-center gap-8 mb-4",children:[Y.jsxs("div",{className:"text-center",children:[Y.jsxs("div",{className:"relative w-20 h-20 bg-gradient-to-br from-blue-400 via-purple-500 to-cyan-400 rounded-2xl flex items-center justify-center mb-3 mx-auto border-2 border-blue-400/30 shadow-lg shadow-blue-500/25",children:[Y.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-400/20 to-purple-500/20 rounded-2xl animate-pulse"}),Y.jsx(a,{className:"w-10 h-10 text-white relative z-10 transform rotate-45"}),Y.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-yellow-400 rounded-full animate-ping"})]}),Y.jsxs("div",{className:"bg-gradient-to-r from-blue-600/30 to-purple-600/30 border border-blue-500/40 rounded-xl px-4 py-2 backdrop-blur-sm",children:[Y.jsx("p",{className:"text-sm text-blue-200 font-semibold",children:c}),Y.jsxs("div",{className:"flex items-center justify-center gap-1 mt-1",children:[Y.jsx("div",{className:"w-1 h-1 bg-blue-400 rounded-full"}),Y.jsx("div",{className:"w-1 h-1 bg-purple-400 rounded-full"}),Y.jsx("div",{className:"w-1 h-1 bg-cyan-400 rounded-full"})]})]})]}),Y.jsxs("div",{className:"text-center",children:[Y.jsxs("div",{className:"relative w-20 h-20 bg-gradient-to-br from-orange-400 via-red-500 to-pink-400 rounded-2xl flex items-center justify-center mb-3 mx-auto border-2 border-orange-400/30 shadow-lg shadow-orange-500/25",children:[Y.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-400/20 to-red-500/20 rounded-2xl animate-pulse"}),Y.jsx(a,{className:"w-10 h-10 text-white relative z-10 transform -rotate-12"}),Y.jsx("div",{className:"absolute -bottom-1 -left-1 w-3 h-3 bg-cyan-400 rounded-full animate-bounce"})]}),Y.jsxs("div",{className:"bg-gradient-to-r from-orange-600/30 to-red-600/30 border border-orange-500/40 rounded-xl px-4 py-2 backdrop-blur-sm",children:[Y.jsx("p",{className:"text-sm text-orange-200 font-semibold",children:"VIT Chennai"}),Y.jsxs("div",{className:"flex items-center justify-center gap-1 mt-1",children:[Y.jsx("div",{className:"w-1 h-1 bg-orange-400 rounded-full"}),Y.jsx("div",{className:"w-1 h-1 bg-red-400 rounded-full"}),Y.jsx("div",{className:"w-1 h-1 bg-pink-400 rounded-full"})]})]})]})]}),Y.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 bg-clip-text text-transparent mb-2",children:"Image Spotter"}),Y.jsxs("p",{className:"text-xl text-blue-300 mb-2",children:[Math.floor(f.totalGameTime/60),"-Minute Vision Test"]}),Y.jsx("p",{className:"text-sm text-gray-400",children:"Space-themed Gaming Platform"})]}),Y.jsxs("div",{className:"flex gap-2",children:[Y.jsx("button",{onClick:()=>o("admin"),className:"p-3 bg-purple-600/20 border border-purple-500/30 rounded-lg hover:bg-purple-600/30 transition-all duration-300 group",children:Y.jsx(u,{className:"w-5 h-5 text-purple-400 group-hover:rotate-90 transition-transform duration-300"})}),Y.jsx("button",{onClick:C,className:"p-3 bg-red-600/20 border border-red-500/30 rounded-lg hover:bg-red-600/30 transition-all duration-300",children:Y.jsx(d,{className:"w-5 h-5 text-red-400"})})]})]}),Y.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[Y.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[Y.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-2xl p-8",children:[Y.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[Y.jsx(R,{className:"w-6 h-6 text-blue-400"}),"Start Your Challenge"]}),Y.jsxs("div",{className:"space-y-4",children:[Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-blue-300 font-medium mb-2",children:"Enter Your Name"}),Y.jsx("input",{type:"text",value:n,onChange:e=>i(e.target.value),placeholder:"Your name here...",className:"w-full p-4 bg-black/50 border border-blue-500/30 rounded-lg text-white placeholder-gray-400 focus:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400/20 transition-all duration-300",onKeyPress:e=>"Enter"===e.key&&P()})]}),Y.jsxs("button",{onClick:P,disabled:!n.trim()||b.length<f.imagesPerGame,className:"w-full py-4 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg font-bold text-white hover:from-blue-500 hover:to-purple-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 hover:shadow-lg hover:shadow-blue-500/25",children:["🚀 Start Game (",b.length,"/",f.imagesPerGame," images ready)"]})]})]}),Y.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-green-500/30 rounded-2xl p-8",children:[Y.jsxs("button",{onClick:()=>v(!N),className:"w-full flex items-center justify-between text-left",children:[Y.jsx("h3",{className:"text-xl font-bold text-green-400",children:"📖 Game Instructions"}),Y.jsx("span",{className:"text-green-400",children:N?"−":"+"})]}),N&&Y.jsxs("div",{className:"mt-4 space-y-3 text-gray-300",children:[Y.jsxs("div",{className:"flex items-start gap-3",children:[Y.jsx("span",{className:"text-blue-400 font-bold",children:"🧠"}),Y.jsxs("p",{children:["You will be shown ",f.imagesPerGame," random images to identify."]})]}),Y.jsxs("div",{className:"flex items-start gap-3",children:[Y.jsx("span",{className:"text-yellow-400 font-bold",children:"⏱️"}),Y.jsxs("p",{children:["You have exactly ",f.imageTimeLimit," seconds per image to identify what it is."]})]}),Y.jsxs("div",{className:"flex items-start gap-3",children:[Y.jsx("span",{className:"text-red-400 font-bold",children:"🎯"}),Y.jsxs("p",{children:["Total game time is ",Math.floor(f.totalGameTime/60)," minutes - use your time wisely!"]})]}),Y.jsxs("div",{className:"flex items-start gap-3",children:[Y.jsx("span",{className:"text-purple-400 font-bold",children:"📝"}),Y.jsx("p",{children:"Type your answer in the text box below each image."})]}),Y.jsxs("div",{className:"flex items-start gap-3",children:[Y.jsx("span",{className:"text-green-400 font-bold",children:"🏆"}),Y.jsxs("p",{children:["Your score will be calculated automatically (",f.pointsPerImage," point per correct answer) and can be adjusted by the game administrator (max ",f.maxScore," points)."]})]}),Y.jsxs("div",{className:"flex items-start gap-3",children:[Y.jsx("span",{className:"text-orange-400 font-bold",children:"📊"}),Y.jsx("p",{children:"Check the leaderboard to see your ranking!"})]})]})]})]}),Y.jsxs("div",{className:"space-y-6",children:[Y.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-yellow-500/30 rounded-2xl p-6",children:[Y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Y.jsxs("h3",{className:"text-xl font-bold text-yellow-400 flex items-center gap-2",children:[Y.jsx(I,{className:"w-5 h-5"}),"Leaderboard"]}),Y.jsx("button",{onClick:()=>o("leaderboard"),className:"text-yellow-400 hover:text-yellow-300 transition-colors",children:"View All"})]}),Y.jsxs("div",{className:"space-y-3",children:[x.slice(0,5).map((e,t)=>Y.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg "+(0===t?"bg-gradient-to-r from-yellow-600/20 to-orange-600/20 border border-yellow-500/30":"bg-white/5 border border-gray-600/30"),children:[Y.jsxs("div",{className:"flex items-center gap-3",children:[Y.jsxs("span",{className:"text-lg font-bold "+(0===t?"text-yellow-400":1===t?"text-gray-300":2===t?"text-orange-400":"text-gray-500"),children:["#",t+1]}),Y.jsxs("div",{children:[Y.jsx("span",{className:"text-white font-medium block",children:e.name}),Y.jsxs("span",{className:"text-xs text-gray-400",children:["Auto: ",e.autoScore]})]})]}),Y.jsx("span",{className:"font-bold "+(0===t?"text-yellow-400":"text-blue-400"),children:e.score})]},e.id)),0===x.length&&Y.jsxs("div",{className:"text-center py-8 text-gray-400",children:[Y.jsx(r,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),Y.jsx("p",{children:"No players yet!"}),Y.jsx("p",{className:"text-sm",children:"Be the first to play!"})]})]})]}),Y.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-2xl p-6",children:[Y.jsxs("h3",{className:"text-lg font-bold text-blue-400 mb-4 flex items-center gap-2",children:[Y.jsx(g,{className:"w-5 h-5"}),"Game Status"]}),Y.jsxs("div",{className:"space-y-3 text-sm",children:[Y.jsxs("div",{className:"flex justify-between",children:[Y.jsx("span",{className:"text-gray-400",children:"Images Ready:"}),Y.jsxs("span",{className:"font-bold "+(b.length>=f.imagesPerGame?"text-green-400":"text-red-400"),children:[b.length,"/",f.imagesPerGame]})]}),Y.jsxs("div",{className:"flex justify-between",children:[Y.jsx("span",{className:"text-gray-400",children:"Total Players:"}),Y.jsx("span",{className:"text-blue-400 font-bold",children:x.length})]}),Y.jsxs("div",{className:"flex justify-between",children:[Y.jsx("span",{className:"text-gray-400",children:"Game Duration:"}),Y.jsxs("span",{className:"text-purple-400 font-bold",children:[Math.floor(f.totalGameTime/60)," minutes"]})]}),Y.jsxs("div",{className:"flex justify-between",children:[Y.jsx("span",{className:"text-gray-400",children:"Time per Image:"}),Y.jsxs("span",{className:"text-green-400 font-bold",children:[f.imageTimeLimit,"s"]})]}),Y.jsxs("div",{className:"flex justify-between",children:[Y.jsx("span",{className:"text-gray-400",children:"Points per Image:"}),Y.jsx("span",{className:"text-yellow-400 font-bold",children:f.pointsPerImage})]}),Y.jsxs("div",{className:"flex justify-between",children:[Y.jsx("span",{className:"text-gray-400",children:"Data Status:"}),Y.jsx("span",{className:"text-green-400 font-bold",children:"✓ Secured"})]})]})]})]})]})]})}),Y.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-20 pointer-events-none",children:Y.jsx("div",{className:"bg-gradient-to-t from-black/60 via-black/20 to-transparent p-4",children:Y.jsx("div",{className:"max-w-6xl mx-auto",children:Y.jsxs("div",{className:"flex items-center justify-between",children:[Y.jsxs("div",{className:"flex items-center gap-3 pointer-events-auto",children:[Y.jsxs("div",{className:"relative",children:[Y.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-cyan-400 to-blue-500 rounded-lg flex items-center justify-center border border-cyan-400/30",children:Y.jsx(a,{className:"w-4 h-4 text-white transform rotate-45"})}),Y.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-yellow-400 rounded-full animate-pulse"})]}),Y.jsxs("div",{className:"text-left",children:[Y.jsx("div",{className:"text-sm font-bold bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent",children:"Developed by Meijeevan K.T"}),Y.jsx("div",{className:"text-xs text-gray-400",children:"Space-themed Gaming Platform • VIT Chennai"})]})]}),Y.jsxs("div",{className:"text-xs text-gray-500 pointer-events-auto",children:["v2.0 • ",(new Date).getFullYear()]})]})})})})]}):Y.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[Y.jsx(q,{}),Y.jsx(W,{onLogin:E})]}):Y.jsxs("div",{className:"min-h-screen relative overflow-hidden flex items-center justify-center",children:[Y.jsx(q,{}),Y.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-2xl p-8 text-center",children:[Y.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-blue-400 border-t-transparent rounded-full mx-auto mb-4"}),Y.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Loading Game Data..."}),Y.jsx("p",{className:"text-gray-400",children:"Please wait while we restore your data"})]})]})}class X extends s.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Error caught by boundary:",e,t),this.setState({error:e,errorInfo:t})}handleReload=()=>{window.location.reload()};handleGoHome=()=>{this.setState({hasError:!1}),window.location.href=window.location.origin};render(){return this.state.hasError?this.props.fallback?this.props.fallback:Y.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 flex items-center justify-center p-6",children:Y.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-red-500/30 rounded-2xl p-8 max-w-md w-full text-center",children:[Y.jsx(h,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),Y.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Oops! Something went wrong"}),Y.jsx("p",{className:"text-gray-400 mb-6",children:"We encountered an unexpected error. Don't worry, your data is safe."}),Y.jsxs("div",{className:"space-y-3",children:[Y.jsxs("button",{onClick:this.handleReload,className:"w-full py-3 bg-blue-600/20 border border-blue-500/30 rounded-lg text-blue-400 hover:bg-blue-600/30 transition-all duration-300 flex items-center justify-center gap-2",children:[Y.jsx(L,{className:"w-4 h-4"}),"Reload Page"]}),Y.jsxs("button",{onClick:this.handleGoHome,className:"w-full py-3 bg-gray-600/20 border border-gray-500/30 rounded-lg text-gray-400 hover:bg-gray-600/30 transition-all duration-300 flex items-center justify-center gap-2",children:[Y.jsx(M,{className:"w-4 h-4"}),"Go Home"]})]}),!1]})}):this.props.children}}window.addEventListener("error",e=>{console.error("Global error:",e.error)}),window.addEventListener("unhandledrejection",e=>{console.error("Unhandled promise rejection:",e.reason)}),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("SW registered: ",e)}).catch(e=>{console.log("SW registration failed: ",e)})});const Q=document.getElementById("root");if(!Q)throw new Error("Root element not found");$.createRoot(Q).render(Y.jsx(s.StrictMode,{children:Y.jsx(X,{children:Y.jsx(Z,{})})}));
