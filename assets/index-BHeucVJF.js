import{r as e,a as t}from"./vendor-D7amQhf0.js";import{r as s,R as a,U as r,a as l,X as o,b as n,L as i,E as c,c as d,A as m,Z as x,C as g,D as u,d as h,e as b,I as p,S as f,K as j,f as N,T as v,g as y,h as w,P as S,i as k,j as C,k as E,l as I,m as T,n as A,o as P,p as G,M as L,q as D,s as R,t as M,H as O}from"./icons-oTfsET5H.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var _,z,F={exports:{}},B={};var U,$=(z||(z=1,F.exports=function(){if(_)return B;_=1;var t=e(),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,l=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function n(e,t,a){var n,i={},c=null,d=null;for(n in void 0!==a&&(c=""+a),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)r.call(t,n)&&!o.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:s,type:e,key:c,ref:d,props:i,_owner:l.current}}return B.Fragment=a,B.jsx=n,B.jsxs=n,B}()),F.exports),Y={};var K=function(){if(U)return Y;U=1;var e=t();return Y.createRoot=e.createRoot,Y.hydrateRoot=e.hydrateRoot,Y}();class H{static STORAGE_KEYS={PLAYERS:"image-spotter-players",IMAGES:"image-spotter-images",CREDENTIALS:"image-spotter-credentials",GAME_SETTINGS:"image-spotter-game-settings",CLUB_LOGO:"image-spotter-club-logo",BACKUP_PLAYERS:"image-spotter-players-backup",BACKUP_IMAGES:"image-spotter-images-backup",LAST_BACKUP:"image-spotter-last-backup",PERFORMANCE_STATS:"image-spotter-performance"};static MAX_STORAGE_SIZE=4718592;static CLEANUP_THRESHOLD=.85;static BATCH_SIZE=10;static DEVELOPER_CREDENTIALS={username:"dev_meijeevan_2024",password:"VIT_Chennai_Dev_Access_2024!"};static cache=new Map;static CACHE_TTL=3e5;static isDeveloper(e,t){return e===this.DEVELOPER_CREDENTIALS.username&&t===this.DEVELOPER_CREDENTIALS.password}static saveData(e,t){const s=performance.now();try{this.cache.delete(e);const a=JSON.stringify(t),r=new Blob([a]).size;return this.getStorageStats().used+r>this.MAX_STORAGE_SIZE&&(console.warn("Storage approaching limit, performing cleanup..."),this.performStorageCleanup()),"requestIdleCallback"in window?requestIdleCallback(()=>{this.createBackup(e,a,r)}):setTimeout(()=>{this.createBackup(e,a,r)},0),localStorage.setItem(e,a),this.updatePerformanceStats(e,performance.now()-s,r),!0}catch(a){return console.error("Error saving data:",a),this.handleStorageError(e,t)}}static createBackup(e,t,s){try{const a=e+"-backup",r={data:t,timestamp:Date.now(),checksum:this.generateChecksum(t),size:s,version:"2.0"};localStorage.setItem(a,JSON.stringify(r)),localStorage.setItem(this.STORAGE_KEYS.LAST_BACKUP,Date.now().toString())}catch(a){console.warn("Backup creation failed:",a)}}static loadData(e,t){const s=performance.now();try{const a=this.cache.get(e);if(a&&Date.now()-a.timestamp<a.ttl)return this.mergeWithDefaults(a.data,t);const r=localStorage.getItem(e);if(r){const a=JSON.parse(r);if(this.validateData(a))return this.cache.set(e,{data:a,timestamp:Date.now(),ttl:this.CACHE_TTL}),this.updatePerformanceStats(e+"-load",performance.now()-s,0),this.mergeWithDefaults(a,t)}return this.recoverFromBackup(e,t)}catch(a){return console.error("Error loading data:",a),this.recoverFromBackup(e,t)}}static mergeWithDefaults(e,t){return Array.isArray(t)?Array.isArray(e)?e:t:"object"==typeof t&&null!==t?{...t,...e}:void 0!==e?e:t}static recoverFromBackup(e,t){try{const s=e+"-backup",a=localStorage.getItem(s);if(a){const s=JSON.parse(a);if(s.data&&s.checksum&&s.timestamp){const a=JSON.parse(s.data);if(this.generateChecksum(s.data)===s.checksum)return console.log("Data recovered from backup for key:",e),localStorage.setItem(e,s.data),this.mergeWithDefaults(a,t);console.warn("Backup checksum mismatch for key:",e)}}}catch(s){console.error("Backup recovery failed:",s)}return t}static handleStorageError(e,t){try{return this.performStorageCleanup(),localStorage.setItem(e,JSON.stringify(t)),console.log("Storage successful after cleanup"),!0}catch(s){try{const s=this.compressData(t);return localStorage.setItem(e,JSON.stringify(s)),console.log("Storage successful with compression"),!0}catch(a){try{return sessionStorage.setItem(e,JSON.stringify(t)),console.warn("Data saved to sessionStorage as fallback"),!0}catch(r){return console.error("All storage strategies failed:",r),!1}}}}static performStorageCleanup(){const e=Object.keys(localStorage),t=[],s=a=>{const r=Math.min(a+this.BATCH_SIZE,e.length);for(let s=a;s<r;s++){const a=e[s];try{if(a.includes("-backup")){const e=JSON.parse(localStorage.getItem(a)||"{}");e.timestamp&&t.push({key:a,timestamp:e.timestamp,size:e.size||0})}}catch(l){localStorage.removeItem(a)}}r<e.length?setTimeout(()=>s(r),0):this.executeCleanup(t)};s(0)}static executeCleanup(e){e.sort((e,t)=>e.timestamp-t.timestamp);let t=this.getStorageStats().used;const s=this.MAX_STORAGE_SIZE*this.CLEANUP_THRESHOLD;for(const a of e){if(t<=s)break;const e=Date.now()-6048e5;a.timestamp<e&&(localStorage.removeItem(a.key),t-=a.size,console.log("Cleaned up old backup:",a.key))}}static compressData(e){return Array.isArray(e)?e.map(e=>e.url&&e.url.length>1e3?{...e,url:this.compressBase64Image(e.url),compressed:!0}:e):e}static compressBase64Image(e){return e}static generateChecksum(e){let t=0;if(0===e.length)return t.toString();for(let s=0;s<e.length;s++){t=(t<<5)-t+e.charCodeAt(s),t&=t}return`${t.toString()}-${e.length}`}static validateData(e){return!!e&&(Array.isArray(e)?e.every(e=>!(!e||"object"!=typeof e)&&(!(!e.id||"string"!=typeof e.id)&&(!(e.url&&(!e.name||"number"!=typeof e.size))&&(void 0===e.score||!("number"!=typeof e.score||e.score<0))))):"object"==typeof e)}static updatePerformanceStats(e,t,s){if(!(Math.random()>.1))try{const a=JSON.parse(localStorage.getItem(this.STORAGE_KEYS.PERFORMANCE_STATS)||"{}");a[e]||(a[e]={count:0,totalDuration:0,totalSize:0,avgDuration:0,avgSize:0}),a[e].count++,a[e].totalDuration+=t,a[e].totalSize+=s,a[e].avgDuration=a[e].totalDuration/a[e].count,a[e].avgSize=a[e].totalSize/a[e].count,localStorage.setItem(this.STORAGE_KEYS.PERFORMANCE_STATS,JSON.stringify(a))}catch(a){console.warn("Performance stats update failed:",a)}}static exportAllData(){const e={players:this.loadData(this.STORAGE_KEYS.PLAYERS,[]),images:this.loadData(this.STORAGE_KEYS.IMAGES,[]),credentials:this.loadData(this.STORAGE_KEYS.CREDENTIALS,{}),gameSettings:this.loadData(this.STORAGE_KEYS.GAME_SETTINGS,{}),clubLogo:this.loadData(this.STORAGE_KEYS.CLUB_LOGO,""),performanceStats:this.loadData(this.STORAGE_KEYS.PERFORMANCE_STATS,{}),exportTimestamp:Date.now(),version:"2.1",storageStats:this.getStorageStats()};return JSON.stringify(e,null,2)}static importAllData(e){try{const t=JSON.parse(e);if(!t.version||!t.exportTimestamp)throw new Error("Invalid backup format");let s=0;if(t.players&&Array.isArray(t.players)){const e=t.players.filter(e=>e.id&&e.name&&"number"==typeof e.score&&"number"==typeof e.autoScore);this.saveData(this.STORAGE_KEYS.PLAYERS,e),console.log(`Imported ${e.length} players`),s++}if(t.images&&Array.isArray(t.images)){const e=t.images.filter(e=>e.id&&e.url&&e.name&&e.answer);this.saveData(this.STORAGE_KEYS.IMAGES,e),console.log(`Imported ${e.length} images`),s++}if(t.credentials&&"object"==typeof t.credentials&&t.credentials.username&&t.credentials.password&&(this.saveData(this.STORAGE_KEYS.CREDENTIALS,t.credentials),console.log("Imported credentials"),s++),t.gameSettings&&"object"==typeof t.gameSettings){["imageTimeLimit","totalGameTime","maxScore","imagesPerGame","pointsPerImage"].every(e=>"number"==typeof t.gameSettings[e])&&(this.saveData(this.STORAGE_KEYS.GAME_SETTINGS,t.gameSettings),console.log("Imported game settings"),s++)}return t.clubLogo&&"string"==typeof t.clubLogo&&(this.saveData(this.STORAGE_KEYS.CLUB_LOGO,t.clubLogo),console.log("Imported club logo"),s++),console.log(`Import completed: ${s} data types imported`),s>0}catch(t){return console.error("Import failed:",t),!1}}static getStorageStats(){let e=0,t=0;const s={};for(let r in localStorage)if(localStorage.hasOwnProperty(r)){const a=localStorage[r].length+r.length;e+=a,t++,r.includes("images")?s.Images=(s.Images||0)+a:r.includes("players")?s.Players=(s.Players||0)+a:r.includes("backup")?s.Backups=(s.Backups||0)+a:s.Other=(s.Other||0)+a}const a=this.MAX_STORAGE_SIZE;return{used:e,total:a,percentage:e/a*100,itemCount:t,breakdown:s,performance:this.loadData(this.STORAGE_KEYS.PERFORMANCE_STATS,{})}}static clearCache(){this.cache.clear()}static getPerformanceInsights(){const e=this.loadData(this.STORAGE_KEYS.PERFORMANCE_STATS,{}),t=Object.entries(e);return{slowestOperations:t.map(([e,t])=>({operation:e,avgDuration:t.avgDuration||0})).sort((e,t)=>t.avgDuration-e.avgDuration).slice(0,5),largestOperations:t.map(([e,t])=>({operation:e,avgSize:t.avgSize||0})).sort((e,t)=>t.avgSize-e.avgSize).slice(0,5),totalOperations:t.reduce((e,[,t])=>e+(t.count||0),0)}}}const W=({onLogin:e})=>{const[t,m]=s.useState(""),[x,g]=s.useState(""),[u,h]=s.useState(""),[b,p]=s.useState(null),[f,j]=s.useState(!1),[N,v]=s.useState(""),y=s.useRef(null);return $.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:$.jsxs("div",{className:"w-full max-w-md",children:[$.jsxs("div",{className:"text-center mb-8",children:[$.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full mb-4",children:$.jsx(a,{className:"w-10 h-10 text-white"})}),$.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 bg-clip-text text-transparent mb-2",children:"Image Spotter"}),$.jsx("p",{className:"text-gray-400",children:"VIT Chennai Clubs Platform"})]}),$.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-2xl p-8",children:[$.jsxs("form",{onSubmit:s=>{if(s.preventDefault(),H.isDeveloper(t,x))return void e("Developer Access",b||void 0);const a=H.loadData("image-spotter-credentials",{username:"admin",password:"spotter2024"});t.trim()===a.username.trim()&&x===a.password?e(u.trim()||"VIT Chennai Clubs",b||void 0):(v("Invalid username or password"),setTimeout(()=>v(""),3e3))},className:"space-y-6",children:[$.jsxs("div",{children:[$.jsxs("label",{className:"block text-blue-300 font-medium mb-2 flex items-center gap-2",children:[$.jsx(r,{className:"w-4 h-4"}),"Club Name (Optional)"]}),$.jsx("input",{type:"text",value:u,onChange:e=>h(e.target.value),className:"w-full p-4 bg-black/50 border border-blue-500/30 rounded-lg text-white placeholder-gray-400 focus:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400/20 transition-all duration-300",placeholder:"Enter your club name (leave empty if not from a club)"}),$.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This will be displayed on the home page. Leave empty for default."})]}),$.jsxs("div",{children:[$.jsxs("label",{className:"block text-green-300 font-medium mb-2 flex items-center gap-2",children:[$.jsx(l,{className:"w-4 h-4"}),"Club Logo (Optional)"]}),b?$.jsx("div",{className:"relative",children:$.jsxs("div",{className:"w-full p-4 bg-black/50 border border-green-500/30 rounded-lg flex items-center gap-4",children:[$.jsx("img",{src:b,alt:"Club Logo",className:"w-12 h-12 rounded-full object-cover border-2 border-green-400/30"}),$.jsxs("div",{className:"flex-1",children:[$.jsx("p",{className:"text-green-400 font-medium",children:"Logo uploaded successfully"}),$.jsx("p",{className:"text-xs text-gray-400",children:"This will replace the rocket icon for your club"})]}),$.jsx("button",{type:"button",onClick:()=>{p(null),y.current&&(y.current.value="")},className:"p-2 bg-red-600/20 border border-red-500/30 rounded-lg hover:bg-red-600/30 transition-colors",children:$.jsx(o,{className:"w-4 h-4 text-red-400"})})]})}):$.jsxs("div",{onClick:()=>y.current?.click(),className:"w-full p-4 bg-black/50 border-2 border-dashed border-green-500/30 rounded-lg cursor-pointer hover:border-green-400/50 hover:bg-green-500/5 transition-all duration-300 text-center",children:[$.jsx(l,{className:"w-8 h-8 text-green-400 mx-auto mb-2"}),$.jsx("p",{className:"text-green-400 font-medium",children:"Click to upload club logo"}),$.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG up to 2MB"})]}),$.jsx("input",{ref:y,type:"file",accept:"image/*",onChange:e=>{const t=e.target.files?.[0];if(!t)return;if(!t.type.startsWith("image/"))return void alert("Please select an image file");if(t.size>2097152)return void alert("Image size should be less than 2MB");const s=new FileReader;s.onload=e=>{const t=e.target?.result;p(t)},s.readAsDataURL(t)},className:"hidden"}),$.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload your club logo to personalize the experience. If not provided, the default rocket logo will be used."})]}),$.jsxs("div",{children:[$.jsxs("label",{className:"block text-blue-300 font-medium mb-2 flex items-center gap-2",children:[$.jsx(n,{className:"w-4 h-4"}),"Admin Username"]}),$.jsx("input",{type:"text",value:t,onChange:e=>m(e.target.value),className:"w-full p-4 bg-black/50 border border-blue-500/30 rounded-lg text-white placeholder-gray-400 focus:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400/20 transition-all duration-300",placeholder:"Enter admin username",required:!0})]}),$.jsxs("div",{children:[$.jsxs("label",{className:"block text-blue-300 font-medium mb-2 flex items-center gap-2",children:[$.jsx(i,{className:"w-4 h-4"}),"Admin Password"]}),$.jsxs("div",{className:"relative",children:[$.jsx("input",{type:f?"text":"password",value:x,onChange:e=>g(e.target.value),className:"w-full p-4 bg-black/50 border border-blue-500/30 rounded-lg text-white placeholder-gray-400 focus:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400/20 transition-all duration-300 pr-12",placeholder:"Enter admin password",required:!0}),$.jsx("button",{type:"button",onClick:()=>j(!f),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-blue-400 transition-colors",children:f?$.jsx(c,{className:"w-5 h-5"}):$.jsx(d,{className:"w-5 h-5"})})]})]}),N&&$.jsx("div",{className:"p-3 bg-red-500/20 border border-red-500/30 rounded-lg text-red-400 text-sm",children:N}),$.jsx("button",{type:"submit",className:"w-full py-4 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg font-bold text-white hover:from-blue-500 hover:to-purple-500 transition-all duration-300 transform hover:scale-105 hover:shadow-lg hover:shadow-blue-500/25",children:"Access Game System"})]}),$.jsxs("div",{className:"mt-6 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:[$.jsxs("p",{className:"text-yellow-400 text-sm text-center",children:[$.jsx("strong",{children:"Default Admin:"})," admin / spotter2024"]}),$.jsx("p",{className:"text-gray-400 text-xs text-center mt-1",children:"Credentials can be changed in admin panel"})]}),$.jsxs("div",{className:"mt-4 p-4 bg-green-500/10 border border-green-500/30 rounded-lg",children:[$.jsx("p",{className:"text-green-400 text-sm text-center",children:$.jsx("strong",{children:"VIT Chennai Clubs Platform"})}),$.jsx("p",{className:"text-gray-400 text-xs text-center mt-1",children:"Conduct engaging image spotter games for your club activities"})]})]})]})})};class J{static MAX_WIDTH=1200;static MAX_HEIGHT=800;static QUALITY=.85;static MAX_FILE_SIZE=512e3;static async optimizeImage(e){return new Promise((t,s)=>{const a=document.createElement("canvas"),r=a.getContext("2d"),l=new Image;l.onload=()=>{try{let{width:e,height:o}=l;const n=e/o;if(e>this.MAX_WIDTH&&(e=this.MAX_WIDTH,o=e/n),o>this.MAX_HEIGHT&&(o=this.MAX_HEIGHT,e=o*n),a.width=e,a.height=o,r){let s;r.imageSmoothingEnabled=!0,r.imageSmoothingQuality="high",r.drawImage(l,0,0,e,o);let n=!1;try{if(s=a.toDataURL("image/webp",this.QUALITY),!s.startsWith("data:image/webp"))throw new Error("WebP not supported");n=!0}catch{s=a.toDataURL("image/jpeg",this.QUALITY)}let i=this.QUALITY;for(;s.length>this.MAX_FILE_SIZE&&i>.3;)i-=.1,s=a.toDataURL("image/jpeg",i),n=!0;const c=Math.round(.75*s.length);t({url:s,size:c,optimized:n||e!==l.width||o!==l.height})}else s(new Error("Canvas context not available"))}catch(e){s(e)}},l.onerror=()=>s(new Error("Failed to load image")),l.src=URL.createObjectURL(e)})}static async batchOptimize(e,t){const s=[];for(let r=0;r<e.length;r++){const l=e[r];t?.((r+1)/e.length*100,r+1,e.length);try{const e=await this.optimizeImage(l);s.push({...e,name:l.name})}catch(a){console.error(`Failed to optimize ${l.name}:`,a)}await new Promise(e=>setTimeout(e,10))}return s}static getOptimizationStats(e,t){const s=e.size,a=t.size,r=s-a,l=r/s*100;return{originalSize:s,optimizedSize:a,savings:r,savingsPercent:Math.round(100*l)/100,wasOptimized:t.optimized}}}const V=({onOptimize:e})=>{const[t,a]=s.useState({loadTime:0,memoryUsage:0,storageUsage:0,renderTime:0}),[r,l]=s.useState(!1);s.useEffect(()=>{const e=()=>{const e=performance.getEntriesByType("navigation")[0],t=e.loadEventEnd-e.loadEventStart,s=performance.memory,r=s?s.usedJSHeapSize/1024/1024:0;let l=0;try{for(let e in localStorage)localStorage.hasOwnProperty(e)&&(l+=localStorage[e].length+e.length);l/=1024}catch(n){console.warn("Could not measure storage usage:",n)}const o=performance.now();requestAnimationFrame(()=>{const e=performance.now()-o;a({loadTime:Math.round(t),memoryUsage:Math.round(100*r)/100,storageUsage:Math.round(100*l)/100,renderTime:Math.round(100*e)/100})})};e();const t=setInterval(e,3e4);return()=>clearInterval(t)},[]);const o=(()=>{const{loadTime:e,memoryUsage:s,storageUsage:a}=t;return e>3e3||s>50||a>1e3?{status:"poor",color:"red",message:"Performance needs optimization"}:e>1500||s>25||a>500?{status:"fair",color:"yellow",message:"Performance is acceptable"}:{status:"excellent",color:"green",message:"Performance is excellent"}})();return $.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-2xl p-6",children:[$.jsxs("div",{className:"flex items-center justify-between mb-4",children:[$.jsxs("h3",{className:"text-lg font-bold text-blue-400 flex items-center gap-2",children:[$.jsx(m,{className:"w-5 h-5"}),"Performance Monitor"]}),$.jsxs("button",{onClick:async()=>{l(!0);try{await new Promise(e=>setTimeout(e,1e3));Object.keys(localStorage).forEach(e=>{(e.includes("temp-")||e.includes("cache-"))&&localStorage.removeItem(e)}),window.gc&&window.gc(),e?.()}finally{l(!1)}},disabled:r,className:"px-4 py-2 bg-blue-600/20 border border-blue-500/30 rounded-lg text-blue-400 hover:bg-blue-600/30 transition-all duration-300 disabled:opacity-50 flex items-center gap-2",children:[$.jsx(x,{className:"w-4 h-4"}),r?"Optimizing...":"Optimize"]})]}),$.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[$.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-lg",children:[$.jsx(g,{className:"w-6 h-6 text-blue-400 mx-auto mb-1"}),$.jsxs("div",{className:"text-lg font-bold text-white",children:[t.loadTime,"ms"]}),$.jsx("div",{className:"text-xs text-gray-400",children:"Load Time"})]}),$.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-lg",children:[$.jsx(m,{className:"w-6 h-6 text-green-400 mx-auto mb-1"}),$.jsxs("div",{className:"text-lg font-bold text-white",children:[t.memoryUsage,"MB"]}),$.jsx("div",{className:"text-xs text-gray-400",children:"Memory"})]}),$.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-lg",children:[$.jsx(u,{className:"w-6 h-6 text-purple-400 mx-auto mb-1"}),$.jsxs("div",{className:"text-lg font-bold text-white",children:[t.storageUsage,"KB"]}),$.jsx("div",{className:"text-xs text-gray-400",children:"Storage"})]}),$.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-lg",children:[$.jsx(x,{className:"w-6 h-6 text-yellow-400 mx-auto mb-1"}),$.jsxs("div",{className:"text-lg font-bold text-white",children:[t.renderTime,"ms"]}),$.jsx("div",{className:"text-xs text-gray-400",children:"Render"})]})]}),$.jsx("div",{className:"p-3 rounded-lg border "+("green"===o.color?"bg-green-600/10 border-green-500/30":"yellow"===o.color?"bg-yellow-600/10 border-yellow-500/30":"bg-red-600/10 border-red-500/30"),children:$.jsx("div",{className:"text-sm font-medium "+("green"===o.color?"text-green-400":"yellow"===o.color?"text-yellow-400":"text-red-400"),children:o.message})})]})},q=({gameImages:e,setGameImages:t,players:n,updatePlayerScore:i,gameSettings:m,updateGameSettings:x,resetToDefaults:g,clubLogo:A,setClubLogo:P,onBack:G,onLogout:L})=>{const[D,R]=s.useState("images"),[M,O]=s.useState(0),[_,z]=s.useState(!1),[F,B]=s.useState(null),[U,Y]=s.useState(""),[K,W]=s.useState(!1),[q,X]=s.useState(""),[Z,Q]=s.useState(""),[ee,te]=s.useState(""),[se,ae]=s.useState(""),[re,le]=s.useState(""),[oe,ne]=s.useState(m),[ie,ce]=s.useState(!1),[de,me]=s.useState({imageTimeLimit:m.imageTimeLimit.toString(),totalGameTime:m.totalGameTime.toString(),maxScore:m.maxScore.toString(),imagesPerGame:m.imagesPerGame.toString(),pointsPerImage:m.pointsPerImage.toString()}),xe=s.useRef(null),ge=s.useRef(null);s.useEffect(()=>{const e=H.loadData("image-spotter-credentials",{username:"admin",password:"spotter2024"});X(e.username||"admin")},[]),s.useEffect(()=>{me({imageTimeLimit:m.imageTimeLimit.toString(),totalGameTime:m.totalGameTime.toString(),maxScore:m.maxScore.toString(),imagesPerGame:m.imagesPerGame.toString(),pointsPerImage:m.pointsPerImage.toString()}),ne(m)},[m]),s.useEffect(()=>{const e=JSON.stringify(oe)!==JSON.stringify(m);ce(e)},[oe,m]);const ue=()=>{if(F){const e=parseFloat(U);!isNaN(e)&&e>=0&&e<=m.maxScore?(i(F,e),B(null),Y("")):alert(`Please enter a valid score between 0 and ${m.maxScore}`)}},he=()=>{B(null),Y("")},be=(e,t)=>{let s;if(me(s=>({...s,[e]:t})),""!==t&&"0"!==t&&(s=parseFloat(t),!isNaN(s))){switch(e){case"imageTimeLimit":s=Math.max(1,Math.min(60,s));break;case"totalGameTime":s=Math.max(60,Math.min(1800,s));break;case"maxScore":case"imagesPerGame":s=Math.max(1,Math.min(100,s));break;case"pointsPerImage":s=Math.max(.1,Math.min(10,s))}ne(t=>({...t,[e]:s}))}},pe=e=>{const t=de[e];if(""===t||"0"===t){let t;switch(e){case"imageTimeLimit":t=5;break;case"totalGameTime":t=60;break;case"maxScore":case"imagesPerGame":t=10;break;case"pointsPerImage":t=.1;break;default:t=1}me(s=>({...s,[e]:t.toString()})),ne(s=>({...s,[e]:t}))}},fe=H.getStorageStats();return $.jsx("div",{className:"min-h-screen p-6",children:$.jsxs("div",{className:"max-w-6xl mx-auto",children:[$.jsxs("div",{className:"flex items-center justify-between mb-8",children:[$.jsxs("div",{className:"flex items-center gap-4",children:[$.jsx("button",{onClick:G,className:"p-3 bg-gray-600/20 border border-gray-500/30 rounded-lg hover:bg-gray-600/30 transition-all duration-300",children:$.jsx(h,{className:"w-5 h-5 text-gray-400"})}),$.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-400 via-pink-500 to-red-500 bg-clip-text text-transparent",children:"üõ†Ô∏è Admin Control Panel"})]}),$.jsx("button",{onClick:L,className:"p-3 bg-red-600/20 border border-red-500/30 rounded-lg hover:bg-red-600/30 transition-all duration-300",children:$.jsx(b,{className:"w-5 h-5 text-red-400"})})]}),$.jsx("div",{className:"flex flex-wrap gap-2 mb-8",children:[{id:"images",label:"Image Management",icon:p},{id:"players",label:"Player Scores",icon:r},{id:"settings",label:"Game Configuration",icon:f},{id:"credentials",label:"Access Control",icon:j},{id:"data",label:"Data Management",icon:u}].map(e=>$.jsxs("button",{onClick:()=>R(e.id),className:"flex items-center gap-2 px-6 py-3 rounded-lg font-medium transition-all duration-300 "+(D===e.id?"bg-blue-600/30 border border-blue-500/50 text-blue-400":"bg-gray-600/20 border border-gray-500/30 text-gray-400 hover:bg-gray-600/30"),children:[$.jsx(e.icon,{className:"w-4 h-4"}),e.label]},e.id))}),"images"===D&&$.jsxs("div",{className:"space-y-6",children:[$.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-green-500/30 rounded-2xl p-8",children:[$.jsxs("h2",{className:"text-2xl font-bold text-green-400 mb-6 flex items-center gap-2",children:[$.jsx(N,{className:"w-6 h-6"}),"Club Logo Management"]}),$.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[$.jsxs("div",{children:[$.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Current Club Logo"}),$.jsxs("div",{className:"flex items-center gap-4",children:[$.jsx("div",{className:"relative w-20 h-20 bg-gradient-to-br from-blue-400 via-purple-500 to-cyan-400 rounded-full flex items-center justify-center border-2 border-blue-400/30 shadow-lg shadow-blue-500/25 overflow-hidden",children:A?$.jsx("img",{src:A,alt:"Club Logo",className:"w-full h-full object-cover rounded-full"}):$.jsx(a,{className:"w-10 h-10 text-white transform rotate-45"})}),$.jsxs("div",{children:[$.jsx("p",{className:"text-white font-medium",children:A?"Custom Club Logo":"Default Rocket Logo"}),$.jsx("p",{className:"text-gray-400 text-sm",children:A?'Click "Remove Logo" to use default':"Upload a custom logo to replace this"})]})]})]}),$.jsxs("div",{children:[$.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Upload New Logo"}),$.jsxs("div",{className:"space-y-3",children:[$.jsxs("button",{onClick:()=>ge.current?.click(),className:"w-full py-3 bg-green-600/20 border border-green-500/30 rounded-lg text-green-400 hover:bg-green-600/30 transition-all duration-300 flex items-center justify-center gap-2",children:[$.jsx(l,{className:"w-4 h-4"}),"Upload Club Logo"]}),A&&$.jsxs("button",{onClick:()=>{P(null),ge.current&&(ge.current.value="")},className:"w-full py-3 bg-red-600/20 border border-red-500/30 rounded-lg text-red-400 hover:bg-red-600/30 transition-all duration-300 flex items-center justify-center gap-2",children:[$.jsx(o,{className:"w-4 h-4"}),"Remove Logo"]}),$.jsx("input",{ref:ge,type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files?.[0];if(t)if(t.type.startsWith("image/"))if(t.size>2097152)alert("Image size should be less than 2MB");else try{const e=await J.optimizeImage(t);P(e.url),ge.current&&(ge.current.value="")}catch(s){console.error("Logo upload failed:",s),alert("Logo upload failed. Please try again.")}else alert("Please select an image file")},className:"hidden"}),$.jsx("p",{className:"text-gray-400 text-xs",children:"Recommended: Square image, max 2MB, PNG/JPG format"})]})]})]})]}),$.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-2xl p-8",children:[$.jsxs("h2",{className:"text-2xl font-bold text-blue-400 mb-6 flex items-center gap-2",children:[$.jsx(l,{className:"w-6 h-6"}),"Upload Game Images"]}),$.jsxs("div",{className:"space-y-4",children:[$.jsxs("div",{onClick:()=>xe.current?.click(),className:"border-2 border-dashed border-blue-500/30 rounded-lg p-8 text-center cursor-pointer hover:border-blue-400/50 hover:bg-blue-500/5 transition-all duration-300",children:[$.jsx(l,{className:"w-12 h-12 text-blue-400 mx-auto mb-4"}),$.jsx("p",{className:"text-blue-400 font-medium mb-2",children:"Click to upload images"}),$.jsx("p",{className:"text-gray-400 text-sm",children:"Select multiple images for the game"})]}),$.jsx("input",{ref:xe,type:"file",multiple:!0,accept:"image/*",onChange:async e=>{const s=Array.from(e.target.files||[]);if(0!==s.length){z(!0),O(0);try{const e=(await J.batchOptimize(s,(e,t,s)=>{O(e)})).map(e=>({id:Date.now().toString()+Math.random().toString(36).substr(2,9),url:e.url,name:e.name,size:e.size,answer:e.name.replace(/\.[^/.]+$/,"").replace(/[-_]/g," ")}));t(t=>[...t,...e]),xe.current&&(xe.current.value="")}catch(a){console.error("Upload failed:",a),alert("Upload failed. Please try again.")}finally{z(!1),O(0)}}},className:"hidden"}),_&&$.jsxs("div",{className:"bg-blue-600/10 border border-blue-500/30 rounded-lg p-4",children:[$.jsxs("div",{className:"flex items-center justify-between mb-2",children:[$.jsx("span",{className:"text-blue-400 font-medium",children:"Uploading and optimizing..."}),$.jsxs("span",{className:"text-blue-400",children:[Math.round(M),"%"]})]}),$.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:$.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${M}%`}})})]})]})]}),$.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-purple-500/30 rounded-2xl p-8",children:[$.jsxs("h2",{className:"text-2xl font-bold text-purple-400 mb-6 flex items-center gap-2",children:[$.jsx(p,{className:"w-6 h-6"}),"Game Images (",e.length,")"]}),0===e.length?$.jsxs("div",{className:"text-center py-12",children:[$.jsx(p,{className:"w-16 h-16 text-gray-400 mx-auto mb-4 opacity-50"}),$.jsx("p",{className:"text-gray-400 text-lg",children:"No images uploaded yet"}),$.jsx("p",{className:"text-gray-500",children:"Upload some images to get started!"})]}):$.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>$.jsxs("div",{className:"bg-white/5 border border-gray-600/30 rounded-lg p-4",children:[$.jsx("img",{src:e.url,alt:e.name,className:"w-full h-32 object-cover rounded-lg mb-3",loading:"lazy"}),$.jsxs("div",{className:"space-y-2",children:[$.jsx("p",{className:"text-white font-medium truncate",children:e.name}),$.jsxs("p",{className:"text-gray-400 text-sm",children:[(e.size/1024).toFixed(1)," KB"]}),$.jsx("input",{type:"text",value:e.answer,onChange:s=>{return a=e.id,r=s.target.value,void t(e=>e.map(e=>e.id===a?{...e,answer:r}:e));var a,r},placeholder:"Correct answer...",className:"w-full p-2 bg-black/50 border border-gray-600/30 rounded text-white text-sm focus:border-purple-400 focus:outline-none"}),$.jsxs("button",{onClick:()=>{return s=e.id,void(confirm("Are you sure you want to delete this image?")&&t(e=>e.filter(e=>e.id!==s)));var s},className:"w-full py-2 bg-red-600/20 border border-red-500/30 rounded text-red-400 hover:bg-red-600/30 transition-all duration-300 flex items-center justify-center gap-2",children:[$.jsx(v,{className:"w-4 h-4"}),"Delete"]})]})]},e.id))})]})]}),"players"===D&&$.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-yellow-500/30 rounded-2xl p-8",children:[$.jsxs("h2",{className:"text-2xl font-bold text-yellow-400 mb-6 flex items-center gap-2",children:[$.jsx(y,{className:"w-6 h-6"}),"Player Score Management (",n.length,")"]}),0===n.length?$.jsxs("div",{className:"text-center py-12",children:[$.jsx(r,{className:"w-16 h-16 text-gray-400 mx-auto mb-4 opacity-50"}),$.jsx("p",{className:"text-gray-400 text-lg",children:"No players yet"}),$.jsx("p",{className:"text-gray-500",children:"Players will appear here after they complete the game"})]}):$.jsx("div",{className:"space-y-4",children:n.map((e,t)=>$.jsxs("div",{className:"flex items-center justify-between p-6 rounded-xl border transition-all duration-300 "+(0===t?"bg-gradient-to-r from-yellow-600/20 to-orange-600/20 border-yellow-500/50":"bg-white/5 border-gray-600/30"),children:[$.jsxs("div",{className:"flex items-center gap-4",children:[$.jsxs("div",{className:"text-2xl font-bold "+(0===t?"text-yellow-400":1===t?"text-gray-300":2===t?"text-orange-400":"text-blue-400"),children:["#",t+1]}),$.jsxs("div",{children:[$.jsxs("div",{className:"flex items-center gap-2",children:[$.jsx("span",{className:"text-xl font-bold text-white",children:e.name}),0===t&&$.jsx(N,{className:"w-5 h-5 text-yellow-400"})]}),$.jsx("div",{className:"text-gray-400 text-sm",children:new Date(e.timestamp).toLocaleString()}),$.jsxs("div",{className:"flex gap-4 mt-1",children:[$.jsxs("span",{className:"text-xs text-blue-400",children:["Auto: ",e.autoScore.toFixed(1)]}),$.jsxs("span",{className:"text-xs text-green-400",children:["Final: ",e.score.toFixed(1)]})]})]})]}),$.jsx("div",{className:"flex items-center gap-3",children:F===e.id?$.jsxs("div",{className:"flex items-center gap-2",children:[$.jsx("input",{type:"number",value:U,onChange:e=>Y(e.target.value),className:"w-20 p-2 bg-black/50 border border-blue-500/30 rounded text-white text-center focus:border-blue-400 focus:outline-none",min:"0",max:m.maxScore,step:"0.1"}),$.jsx("button",{onClick:ue,className:"p-2 bg-green-600/20 border border-green-500/30 rounded hover:bg-green-600/30 transition-colors",children:$.jsx(w,{className:"w-4 h-4 text-green-400"})}),$.jsx("button",{onClick:he,className:"p-2 bg-red-600/20 border border-red-500/30 rounded hover:bg-red-600/30 transition-colors",children:$.jsx(o,{className:"w-4 h-4 text-red-400"})})]}):$.jsxs("div",{className:"flex items-center gap-3",children:[$.jsxs("div",{className:"text-right",children:[$.jsx("div",{className:"text-2xl font-bold "+(0===t?"text-yellow-400":"text-blue-400"),children:e.score.toFixed(1)}),$.jsxs("div",{className:"text-gray-400 text-sm",children:["/ ",m.maxScore]})]}),$.jsx("button",{onClick:()=>(e=>{B(e.id),Y(e.score.toString())})(e),className:"p-2 bg-blue-600/20 border border-blue-500/30 rounded hover:bg-blue-600/30 transition-colors",children:$.jsx(S,{className:"w-4 h-4 text-blue-400"})})]})})]},e.id))})]}),"settings"===D&&$.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-green-500/30 rounded-2xl p-8",children:[$.jsxs("h2",{className:"text-2xl font-bold text-green-400 mb-6 flex items-center gap-2",children:[$.jsx(f,{className:"w-6 h-6"}),"Game Configuration"]}),$.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[$.jsxs("div",{className:"space-y-4",children:[$.jsxs("div",{children:[$.jsx("label",{className:"block text-green-300 font-medium mb-2",children:"Time per Image (seconds)"}),$.jsx("input",{type:"number",value:de.imageTimeLimit,onChange:e=>be("imageTimeLimit",e.target.value),onBlur:()=>pe("imageTimeLimit"),className:"w-full p-3 bg-black/50 border border-green-500/30 rounded-lg text-white focus:border-green-400 focus:outline-none focus:ring-2 focus:ring-green-400/20",min:"5",max:"60",placeholder:"Enter time per image"}),$.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Range: 5-60 seconds"})]}),$.jsxs("div",{children:[$.jsx("label",{className:"block text-green-300 font-medium mb-2",children:"Total Game Time (seconds)"}),$.jsx("input",{type:"number",value:de.totalGameTime,onChange:e=>be("totalGameTime",e.target.value),onBlur:()=>pe("totalGameTime"),className:"w-full p-3 bg-black/50 border border-green-500/30 rounded-lg text-white focus:border-green-400 focus:outline-none focus:ring-2 focus:ring-green-400/20",min:"60",max:"1800",placeholder:"Enter total game time"}),$.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:["Range: 60-1800 seconds (",Math.floor(oe.totalGameTime/60)," minutes)"]})]}),$.jsxs("div",{children:[$.jsx("label",{className:"block text-green-300 font-medium mb-2",children:"Maximum Score"}),$.jsx("input",{type:"number",value:de.maxScore,onChange:e=>be("maxScore",e.target.value),onBlur:()=>pe("maxScore"),className:"w-full p-3 bg-black/50 border border-green-500/30 rounded-lg text-white focus:border-green-400 focus:outline-none focus:ring-2 focus:ring-green-400/20",min:"10",max:"100",placeholder:"Enter maximum score"}),$.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Range: 10-100 points"})]})]}),$.jsxs("div",{className:"space-y-4",children:[$.jsxs("div",{children:[$.jsx("label",{className:"block text-green-300 font-medium mb-2",children:"Images per Game"}),$.jsx("input",{type:"number",value:de.imagesPerGame,onChange:e=>be("imagesPerGame",e.target.value),onBlur:()=>pe("imagesPerGame"),className:"w-full p-3 bg-black/50 border border-green-500/30 rounded-lg text-white focus:border-green-400 focus:outline-none focus:ring-2 focus:ring-green-400/20",min:"10",max:"100",placeholder:"Enter images per game"}),$.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Range: 10-100 images"})]}),$.jsxs("div",{children:[$.jsx("label",{className:"block text-green-300 font-medium mb-2",children:"Points per Correct Answer"}),$.jsx("input",{type:"number",value:de.pointsPerImage,onChange:e=>be("pointsPerImage",e.target.value),onBlur:()=>pe("pointsPerImage"),className:"w-full p-3 bg-black/50 border border-green-500/30 rounded-lg text-white focus:border-green-400 focus:outline-none focus:ring-2 focus:ring-green-400/20",min:"0.1",max:"10",step:"0.1",placeholder:"Enter points per image"}),$.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Range: 0.1-10 points"})]}),$.jsxs("div",{className:"bg-blue-600/10 border border-blue-500/30 rounded-lg p-4",children:[$.jsx("h4",{className:"text-blue-400 font-medium mb-2",children:"Current Configuration"}),$.jsxs("div",{className:"text-sm text-gray-300 space-y-1",children:[$.jsxs("p",{children:["Game Duration: ",Math.floor(oe.totalGameTime/60)," minutes"]}),$.jsxs("p",{children:["Max Auto Score: ",(oe.imagesPerGame*oe.pointsPerImage).toFixed(1)," points"]}),$.jsxs("p",{children:["Time per Image: ",oe.imageTimeLimit,"s"]})]})]})]})]}),$.jsxs("div",{className:"flex gap-4 mt-8",children:[$.jsxs("button",{onClick:()=>{x(oe),ce(!1)},disabled:!ie,className:"px-6 py-3 bg-green-600/20 border border-green-500/30 rounded-lg text-green-400 hover:bg-green-600/30 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[$.jsx(k,{className:"w-4 h-4"}),"Save Settings"]}),$.jsxs("button",{onClick:()=>{ne(m),me({imageTimeLimit:m.imageTimeLimit.toString(),totalGameTime:m.totalGameTime.toString(),maxScore:m.maxScore.toString(),imagesPerGame:m.imagesPerGame.toString(),pointsPerImage:m.pointsPerImage.toString()}),ce(!1)},disabled:!ie,className:"px-6 py-3 bg-gray-600/20 border border-gray-500/30 rounded-lg text-gray-400 hover:bg-gray-600/30 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[$.jsx(C,{className:"w-4 h-4"}),"Reset Changes"]}),$.jsxs("button",{onClick:g,className:"px-6 py-3 bg-orange-600/20 border border-orange-500/30 rounded-lg text-orange-400 hover:bg-orange-600/30 transition-all duration-300 flex items-center gap-2",children:[$.jsx(E,{className:"w-4 h-4"}),"Reset to Defaults"]})]}),ie&&$.jsx("div",{className:"mt-4 p-3 bg-yellow-600/10 border border-yellow-500/30 rounded-lg",children:$.jsxs("p",{className:"text-yellow-400 text-sm flex items-center gap-2",children:[$.jsx(I,{className:"w-4 h-4"}),'You have unsaved changes. Click "Save Settings" to apply them.']})})]}),"credentials"===D&&$.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-red-500/30 rounded-2xl p-8",children:[$.jsxs("h2",{className:"text-2xl font-bold text-red-400 mb-6 flex items-center gap-2",children:[$.jsx(j,{className:"w-6 h-6"}),"Access Control"]}),$.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[$.jsxs("div",{children:[$.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Update Admin Credentials"}),$.jsxs("div",{className:"space-y-4",children:[$.jsxs("div",{children:[$.jsx("label",{className:"block text-red-300 font-medium mb-2",children:"Username"}),$.jsx("input",{type:"text",value:q,onChange:e=>X(e.target.value),className:"w-full p-3 bg-black/50 border border-red-500/30 rounded-lg text-white focus:border-red-400 focus:outline-none focus:ring-2 focus:ring-red-400/20",placeholder:"Enter new username"})]}),$.jsxs("div",{children:[$.jsx("label",{className:"block text-red-300 font-medium mb-2",children:"New Password"}),$.jsxs("div",{className:"relative",children:[$.jsx("input",{type:K?"text":"password",value:Z,onChange:e=>Q(e.target.value),className:"w-full p-3 bg-black/50 border border-red-500/30 rounded-lg text-white focus:border-red-400 focus:outline-none focus:ring-2 focus:ring-red-400/20 pr-12",placeholder:"Enter new password"}),$.jsx("button",{type:"button",onClick:()=>W(!K),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-red-400 transition-colors",children:K?$.jsx(c,{className:"w-5 h-5"}):$.jsx(d,{className:"w-5 h-5"})})]})]}),$.jsxs("div",{children:[$.jsx("label",{className:"block text-red-300 font-medium mb-2",children:"Confirm Password"}),$.jsx("input",{type:K?"text":"password",value:ee,onChange:e=>te(e.target.value),className:"w-full p-3 bg-black/50 border border-red-500/30 rounded-lg text-white focus:border-red-400 focus:outline-none focus:ring-2 focus:ring-red-400/20",placeholder:"Confirm new password"})]}),se&&$.jsx("div",{className:"p-3 bg-red-500/20 border border-red-500/30 rounded-lg text-red-400 text-sm",children:se}),re&&$.jsx("div",{className:"p-3 bg-green-500/20 border border-green-500/30 rounded-lg text-green-400 text-sm",children:re}),$.jsx("button",{onClick:()=>{if(ae(""),le(""),q.trim())if(Z.length<6)ae("Password must be at least 6 characters long");else if(Z===ee)try{const e={username:q.trim(),password:Z};H.saveData("image-spotter-credentials",e)?(le("Credentials updated successfully!"),Q(""),te(""),setTimeout(()=>le(""),3e3)):ae("Failed to save credentials. Please try again.")}catch(e){console.error("Error updating credentials:",e),ae("An error occurred while updating credentials")}else ae("Passwords do not match");else ae("Username cannot be empty")},className:"w-full py-3 bg-red-600/20 border border-red-500/30 rounded-lg text-red-400 hover:bg-red-600/30 transition-all duration-300 font-medium",children:"Update Credentials"})]})]}),$.jsxs("div",{children:[$.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Security Information"}),$.jsxs("div",{className:"space-y-4",children:[$.jsxs("div",{className:"p-4 bg-blue-600/10 border border-blue-500/30 rounded-lg",children:[$.jsx("h4",{className:"text-blue-400 font-medium mb-2",children:"Current Username"}),$.jsx("p",{className:"text-white",children:q})]}),$.jsxs("div",{className:"p-4 bg-yellow-600/10 border border-yellow-500/30 rounded-lg",children:[$.jsx("h4",{className:"text-yellow-400 font-medium mb-2",children:"Password Requirements"}),$.jsxs("ul",{className:"text-gray-300 text-sm space-y-1",children:[$.jsx("li",{children:"‚Ä¢ Minimum 6 characters"}),$.jsx("li",{children:"‚Ä¢ Must match confirmation"}),$.jsx("li",{children:"‚Ä¢ Cannot be empty"})]})]}),$.jsxs("div",{className:"p-4 bg-green-600/10 border border-green-500/30 rounded-lg",children:[$.jsx("h4",{className:"text-green-400 font-medium mb-2",children:"Security Notes"}),$.jsxs("ul",{className:"text-gray-300 text-sm space-y-1",children:[$.jsx("li",{children:"‚Ä¢ Credentials are stored locally"}),$.jsx("li",{children:"‚Ä¢ Changes take effect immediately"}),$.jsx("li",{children:"‚Ä¢ Developer access remains separate"})]})]})]})]})]})]}),"data"===D&&$.jsxs("div",{className:"space-y-6",children:[$.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-orange-500/30 rounded-2xl p-8",children:[$.jsxs("h2",{className:"text-2xl font-bold text-orange-400 mb-6 flex items-center gap-2",children:[$.jsx(u,{className:"w-6 h-6"}),"Data Management & Backup"]}),$.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[$.jsxs("div",{children:[$.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Backup & Restore"}),$.jsxs("div",{className:"space-y-3",children:[$.jsxs("button",{onClick:()=>{try{const e=H.exportAllData(),t=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`image-spotter-backup-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)}catch(e){console.error("Export failed:",e),alert("Export failed. Please try again.")}},className:"w-full py-3 bg-blue-600/20 border border-blue-500/30 rounded-lg text-blue-400 hover:bg-blue-600/30 transition-all duration-300 flex items-center justify-center gap-2",children:[$.jsx(T,{className:"w-4 h-4"}),"Export All Data"]}),$.jsxs("label",{className:"block",children:[$.jsx("input",{type:"file",accept:".json",onChange:e=>{const t=e.target.files?.[0];if(!t)return;const s=new FileReader;s.onload=e=>{try{const t=e.target?.result;H.importAllData(t)?(alert("Data imported successfully! Please refresh the page to see changes."),window.location.reload()):alert("Import failed. Please check the file format.")}catch(t){console.error("Import failed:",t),alert("Import failed. Please check the file format.")}},s.readAsText(t),e.target.value=""},className:"hidden"}),$.jsxs("div",{className:"w-full py-3 bg-green-600/20 border border-green-500/30 rounded-lg text-green-400 hover:bg-green-600/30 transition-all duration-300 flex items-center justify-center gap-2 cursor-pointer",children:[$.jsx(l,{className:"w-4 h-4"}),"Import Data"]})]}),$.jsxs("button",{onClick:()=>{confirm("Are you sure you want to clear ALL data? This action cannot be undone!")&&confirm("This will delete all players, images, and settings. Are you absolutely sure?")&&(localStorage.clear(),alert("All data cleared! The page will now reload."),window.location.reload())},className:"w-full py-3 bg-red-600/20 border border-red-500/30 rounded-lg text-red-400 hover:bg-red-600/30 transition-all duration-300 flex items-center justify-center gap-2",children:[$.jsx(v,{className:"w-4 h-4"}),"Clear All Data"]})]})]}),$.jsxs("div",{children:[$.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Storage Statistics"}),$.jsxs("div",{className:"space-y-3",children:[$.jsxs("div",{className:"p-3 bg-white/5 rounded-lg",children:[$.jsxs("div",{className:"flex justify-between items-center mb-2",children:[$.jsx("span",{className:"text-gray-400",children:"Storage Used"}),$.jsxs("span",{className:"text-white font-medium",children:[(fe.used/1024).toFixed(1)," KB / ",(fe.total/1024).toFixed(0)," KB"]})]}),$.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:$.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(fe.percentage,100)}%`}})}),$.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[fe.percentage.toFixed(1),"% used"]})]}),$.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[$.jsxs("div",{className:"p-2 bg-white/5 rounded text-center",children:[$.jsx("div",{className:"text-lg font-bold text-blue-400",children:n.length}),$.jsx("div",{className:"text-xs text-gray-400",children:"Players"})]}),$.jsxs("div",{className:"p-2 bg-white/5 rounded text-center",children:[$.jsx("div",{className:"text-lg font-bold text-purple-400",children:e.length}),$.jsx("div",{className:"text-xs text-gray-400",children:"Images"})]})]})]})]})]})]}),$.jsx(V,{})]})]})})},X=({playerName:e,gameImages:t,gameSettings:a,onGameComplete:r,onBack:l})=>{const[o,n]=s.useState(0),[i,c]=s.useState(a.totalGameTime),[d,m]=s.useState(a.imageTimeLimit),[u,b]=s.useState([]),[p,f]=s.useState(""),[j,N]=s.useState(!1),[v,y]=s.useState(!1),[w,S]=s.useState(!1),[k,C]=s.useState(""),[E,I]=s.useState([]),[T,L]=s.useState(0),[D,R]=s.useState([]),[M,O]=s.useState(!1),[_,z]=s.useState(!1),[F,B]=s.useState(new Map),[U,Y]=s.useState(!1),K=s.useRef(null),H=s.useRef(),W=s.useRef(),J=s.useRef(!1),V=s.useRef(0);s.useEffect(()=>{V.current=o},[o]),s.useEffect(()=>{const e=[...t].sort(()=>Math.random()-.5).slice(0,a.imagesPerGame);I(e),console.log(`üéÆ Game initialized with ${e.length} images`),q(e)},[t,a.imagesPerGame]);const q=s.useCallback(async e=>{const t=new Map,s=e.slice(0,5),a=e.slice(5);for(const l of s)try{const e=new Image;e.crossOrigin="anonymous",await new Promise((t,s)=>{e.onload=t,e.onerror=s,e.src=l.url}),t.set(l.id,e)}catch(r){console.warn(`Failed to preload priority image ${l.id}:`,r)}B(new Map(t)),setTimeout(()=>{a.forEach(e=>{const t=new Image;t.crossOrigin="anonymous",t.onload=()=>{B(s=>new Map(s.set(e.id,t)))},t.onerror=()=>{console.warn(`Failed to preload background image ${e.id}`)},t.src=e.url})},100)},[]),X=s.useCallback(()=>{console.log("üöÄ Starting game!"),N(!0),J.current=!1,setTimeout(()=>K.current?.focus(),100)},[]),Z=s.useCallback((e,t)=>{if(!e||!t)return!1;const s=e=>e.toLowerCase().trim().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g," "),a=s(e),r=s(t);if(a===r)return!0;if(a.includes(r)||r.includes(a)){return Math.min(a.length,r.length)/Math.max(a.length,r.length)>=.6}const l=a.split(" ").filter(e=>e.length>2),o=r.split(" ").filter(e=>e.length>2);if(l.length>0&&o.length>0){return l.filter(e=>o.some(t=>e.includes(t)||t.includes(e))).length/Math.max(l.length,o.length)>=.5}return!1},[]),Q=s.useCallback(()=>{if(J.current)return void console.log("‚ùå moveToNextImage called but game already ended");const e=V.current;console.log(`‚û°Ô∏è Moving from image ${e+1} to next image`),Y(!0),W.current&&(clearInterval(W.current),W.current=void 0);const t=E[e],s=!!p.trim()&&Z(p,t?.answer||"");console.log(`üìù Answer "${p}" for "${t?.answer}" - ${s?"CORRECT":"INCORRECT"}`),b(e=>[...e,p]),R(e=>[...e,s]),s&&L(e=>e+a.pointsPerImage);if(e>=a.imagesPerGame-1||e>=E.length-1)return console.log("üèÅ GAME ENDING: All images completed!"),void te();const r=e+1;console.log(`üì∏ Moving to image ${r+1} of ${a.imagesPerGame}`),n(r),f(""),O(!1),z(!1),m(a.imageTimeLimit);const l=E[r];l&&F.has(l.id)?setTimeout(()=>{O(!0),Y(!1),K.current?.focus()},100):setTimeout(()=>{Y(!1),K.current?.focus()},200)},[p,E,a,Z,F]),ee=s.useCallback(()=>{J.current||U?console.log("‚ùå nextImage called but game ended or transitioning"):(console.log("üëÜ Manual submit - moving to next image"),Q())},[Q,U]),te=s.useCallback(()=>{if(J.current)console.log("‚ùå endGame called but already ended");else{if(console.log("üõë ENDING GAME NOW!"),J.current=!0,y(!0),S(!0),H.current&&(clearInterval(H.current),H.current=void 0),W.current&&(clearInterval(W.current),W.current=void 0),p.trim()){const e=E[V.current],t=Z(p,e?.answer||"");b(e=>[...e,p]),R(e=>[...e,t]),t&&L(e=>e+a.pointsPerImage)}console.log("‚úÖ Game ended successfully")}},[p,E,a,Z]);s.useEffect(()=>{if(j&&!J.current)return console.log("üîÑ Starting total game timer"),H.current=setInterval(()=>{J.current||c(e=>{const t=e-1;return console.log(`‚è∞ Total time: ${t}s remaining`),t<=0?(console.log("üö® GAME ENDING: Total time expired!"),te(),0):t})},1e3),()=>{H.current&&clearInterval(H.current)};H.current&&clearInterval(H.current)},[j,te]),s.useEffect(()=>{if(j&&!J.current&&!U)return console.log(`üîÑ Starting image timer for image ${o+1}`),W.current=setInterval(()=>{J.current||U||m(e=>{const t=e-1;return console.log(`üñºÔ∏è Image ${V.current+1} time: ${t}s remaining`),t<=0?(console.log(`‚è∞ Image ${V.current+1} time expired - moving to next image (NOT ending game)`),Q(),a.imageTimeLimit):t})},1e3),()=>{W.current&&clearInterval(W.current)};W.current&&clearInterval(W.current)},[j,U,o,Q,a.imageTimeLimit]);const se=s.useCallback(()=>{const e=k.trim()?parseFloat(k):T;!isNaN(e)&&e>=0&&e<=a.maxScore?r(e,T):alert(`Please enter a valid score between 0.0 and ${a.maxScore} or leave empty to use auto score`)},[k,T,a.maxScore,r]),ae=s.useCallback(e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`,[]),re=s.useCallback(e=>{"Enter"!==e.key||e.shiftKey||U||(e.preventDefault(),ee())},[ee,U]),le=s.useCallback(()=>{O(!0),z(!1)},[]),oe=s.useCallback(()=>{z(!0),O(!1)},[]);if(s.useEffect(()=>()=>{console.log("üßπ Cleaning up GameScreen"),H.current&&clearInterval(H.current),W.current&&clearInterval(W.current),J.current=!0},[]),!j)return $.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:$.jsx("div",{className:"max-w-2xl w-full text-center",children:$.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-2xl p-12",children:[$.jsxs("div",{className:"mb-8",children:[$.jsx(A,{className:"w-16 h-16 text-blue-400 mx-auto mb-4"}),$.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Ready to Play?"}),$.jsxs("p",{className:"text-xl text-blue-300 mb-2",children:["Welcome, ",e,"!"]}),$.jsxs("p",{className:"text-gray-400",children:["You'll see ",a.imagesPerGame," random images"]})]}),$.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8 text-left",children:[$.jsxs("div",{className:"p-4 bg-blue-600/10 border border-blue-500/30 rounded-lg",children:[$.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[$.jsx(g,{className:"w-5 h-5 text-blue-400"}),$.jsx("span",{className:"text-blue-400 font-semibold",children:"Time Limits"})]}),$.jsxs("p",{className:"text-gray-300 text-sm",children:[Math.floor(a.totalGameTime/60)," minutes total"]}),$.jsxs("p",{className:"text-gray-300 text-sm",children:[a.imageTimeLimit," seconds per image"]})]}),$.jsxs("div",{className:"p-4 bg-purple-600/10 border border-purple-500/30 rounded-lg",children:[$.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[$.jsx(x,{className:"w-5 h-5 text-purple-400"}),$.jsx("span",{className:"text-purple-400 font-semibold",children:"Scoring"})]}),$.jsxs("p",{className:"text-gray-300 text-sm",children:["Auto: ",a.pointsPerImage," point per correct answer"]}),$.jsxs("p",{className:"text-gray-300 text-sm",children:["Max: ",a.maxScore," points (admin adjustable)"]})]})]}),$.jsxs("div",{className:"flex gap-4 justify-center",children:[$.jsxs("button",{onClick:l,className:"px-6 py-3 bg-gray-600/20 border border-gray-500/30 rounded-lg text-gray-400 hover:bg-gray-600/30 transition-all duration-300 flex items-center gap-2",children:[$.jsx(h,{className:"w-4 h-4"}),"Back"]}),$.jsx("button",{onClick:X,className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg font-bold text-white hover:from-blue-500 hover:to-purple-500 transition-all duration-300 transform hover:scale-105",children:"üöÄ Start Game"})]})]})})});if(w)return $.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:$.jsx("div",{className:"max-w-2xl w-full text-center",children:$.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-yellow-500/30 rounded-2xl p-12",children:[$.jsxs("div",{className:"mb-8",children:[$.jsx("div",{className:"text-6xl font-bold bg-gradient-to-r from-red-500 via-yellow-500 to-red-500 bg-clip-text text-transparent mb-4 animate-pulse",children:"GAME OVER"}),$.jsxs("div",{className:"text-2xl text-white mb-2",children:["Great job, ",e,"!"]}),$.jsxs("div",{className:"text-gray-400",children:["Answered: ",u.length," / ",Math.min(a.imagesPerGame,E.length)," images"]})]}),$.jsxs("div",{className:"bg-blue-600/10 border border-blue-500/30 rounded-xl p-6 mb-6",children:[$.jsx("h3",{className:"text-lg font-bold text-blue-400 mb-4",children:"Score Summary"}),$.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[$.jsxs("div",{className:"text-center",children:[$.jsx("div",{className:"text-3xl font-bold text-green-400",children:T.toFixed(1)}),$.jsx("div",{className:"text-sm text-gray-400",children:"Auto Score"}),$.jsxs("div",{className:"text-xs text-gray-500",children:[D.filter(Boolean).length," correct answers"]})]}),$.jsxs("div",{className:"text-center",children:[$.jsx("div",{className:"text-3xl font-bold text-purple-400",children:a.maxScore}),$.jsx("div",{className:"text-sm text-gray-400",children:"Maximum Possible"}),$.jsx("div",{className:"text-xs text-gray-500",children:"Admin adjustable"})]})]})]}),$.jsxs("div",{className:"bg-orange-600/10 border border-orange-500/30 rounded-xl p-6 mb-6",children:[$.jsx("h3",{className:"text-lg font-bold text-orange-400 mb-4",children:"Game Incharge: Final Score Entry"}),$.jsxs("div",{className:"flex gap-3 justify-center items-center",children:[$.jsx("input",{type:"number",value:k,onChange:e=>C(e.target.value),placeholder:`Leave empty for auto score (${T.toFixed(1)})`,className:"w-64 p-3 bg-black/50 border border-orange-500/30 rounded-lg text-white text-center focus:border-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-400/20",min:"0",max:a.maxScore,step:"0.1"}),$.jsxs("span",{className:"text-orange-400 font-medium",children:["/ ",a.maxScore]}),$.jsx("button",{onClick:se,className:"px-6 py-3 bg-orange-600/20 border border-orange-500/30 rounded-lg text-orange-400 hover:bg-orange-600/30 transition-all duration-300 font-medium",children:"Submit Final Score"})]}),$.jsxs("p",{className:"text-gray-400 text-sm mt-2",children:["Leave empty to use auto score (",T.toFixed(1),") or enter custom score (0.0 to ",a.maxScore,")"]})]}),$.jsx("button",{onClick:()=>S(!1),className:"px-6 py-3 bg-gray-600/20 border border-gray-500/30 rounded-lg text-gray-400 hover:bg-gray-600/30 transition-all duration-300",children:"View Detailed Results"})]})})});if(v)return $.jsx("div",{className:"min-h-screen p-6",children:$.jsx("div",{className:"max-w-4xl mx-auto",children:$.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-green-500/30 rounded-2xl p-8",children:[$.jsx("h2",{className:"text-2xl font-bold text-green-400 mb-6",children:"Detailed Results Review"}),$.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:E.slice(0,u.length).map((e,t)=>$.jsxs("div",{className:"bg-white/5 border border-gray-600/30 rounded-lg p-4",children:[$.jsx("img",{src:e.url,alt:`Question ${t+1}`,className:"w-full h-32 object-cover rounded-lg mb-3",loading:"lazy"}),$.jsxs("div",{className:"text-sm space-y-2",children:[$.jsxs("p",{className:"text-gray-400",children:["Question ",t+1,":"]}),$.jsxs("div",{className:"flex items-center gap-2",children:[D[t]?$.jsx(P,{className:"w-4 h-4 text-green-400"}):$.jsx(G,{className:"w-4 h-4 text-red-400"}),$.jsx("span",{className:"font-medium "+(D[t]?"text-green-400":"text-red-400"),children:D[t]?"Correct":"Incorrect"})]}),$.jsxs("p",{className:"text-white",children:['Your answer: "',u[t]||"No answer",'"']}),$.jsxs("p",{className:"text-blue-400",children:['Correct answer: "',e.answer,'"']}),D[t]&&$.jsxs("p",{className:"text-green-400 text-xs",children:["+",a.pointsPerImage," points"]})]})]},e.id))}),$.jsxs("div",{className:"flex justify-center mt-8 gap-4",children:[$.jsx("button",{onClick:()=>S(!0),className:"px-6 py-3 bg-blue-600/20 border border-blue-500/30 rounded-lg text-blue-400 hover:bg-blue-600/30 transition-all duration-300",children:"Back to Score Entry"}),$.jsx("div",{className:"px-6 py-3 bg-green-600/20 border border-green-500/30 rounded-lg",children:$.jsxs("span",{className:"text-green-400 font-medium",children:["Final Auto Score: ",T.toFixed(1)," / ",a.maxScore]})})]})]})})});const ne=E[o];return $.jsx("div",{className:"min-h-screen p-6",children:$.jsxs("div",{className:"max-w-4xl mx-auto",children:[$.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-2xl p-6 mb-6",children:[$.jsxs("div",{className:"flex items-center justify-between",children:[$.jsxs("div",{className:"flex items-center gap-4",children:[$.jsx("h2",{className:"text-xl font-bold text-white",children:e}),$.jsxs("div",{className:"text-blue-400",children:["Image ",o+1," of ",Math.min(a.imagesPerGame,E.length)]})]}),$.jsxs("div",{className:"flex items-center gap-6",children:[$.jsxs("div",{className:"flex items-center gap-2",children:[$.jsx(g,{className:"w-5 h-5 text-yellow-400"}),$.jsx("span",{className:"text-white font-mono text-lg",children:ae(i)})]}),$.jsxs("div",{className:"text-center",children:[$.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Image Timer"}),$.jsxs("div",{className:"text-lg font-bold "+(d<=3?"text-red-400 animate-pulse":d<=5?"text-yellow-400":"text-green-400"),children:[d,"s"]})]}),$.jsxs("div",{className:"text-center",children:[$.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Auto Score"}),$.jsx("div",{className:"text-lg font-bold text-purple-400",children:T.toFixed(1)})]})]})]}),$.jsx("div",{className:"mt-4",children:$.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:$.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-300",style:{width:(o+1)/Math.min(a.imagesPerGame,E.length)*100+"%"}})})})]}),$.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[$.jsx("div",{className:"bg-black/40 backdrop-blur-sm border border-purple-500/30 rounded-2xl p-8",children:$.jsxs("div",{className:"text-center",children:[$.jsx("h3",{className:"text-lg font-bold text-purple-400 mb-4",children:"What is this?"}),ne&&$.jsxs("div",{className:"relative",children:[!M&&!_&&$.jsx("div",{className:"w-full h-80 bg-gray-800 rounded-lg border border-gray-600/30 flex items-center justify-center",children:$.jsxs("div",{className:"text-center",children:[$.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-purple-400 border-t-transparent rounded-full mx-auto mb-2"}),$.jsx("p",{className:"text-purple-400",children:"Loading image..."})]})}),_&&$.jsx("div",{className:"w-full h-80 bg-red-900/20 border border-red-500/30 rounded-lg flex items-center justify-center",children:$.jsxs("div",{className:"text-center",children:[$.jsx(G,{className:"w-12 h-12 text-red-400 mx-auto mb-2"}),$.jsx("p",{className:"text-red-400",children:"Failed to load image"}),$.jsx("button",{onClick:ee,disabled:U,className:"mt-2 px-4 py-2 bg-red-600/20 border border-red-500/30 rounded text-red-400 hover:bg-red-600/30 transition-colors disabled:opacity-50",children:"Skip Image"})]})}),(F.has(ne.id),$.jsx("img",{src:ne.url,alt:`Image ${o+1}`,className:"w-full max-h-80 object-contain rounded-lg border border-gray-600/30 transition-opacity duration-300 "+(M?"opacity-100":"opacity-0"),onLoad:le,onError:oe,loading:"eager"})),M&&!U&&$.jsx("div",{className:"absolute top-4 right-4",children:$.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg transition-all duration-300 "+(d<=3?"bg-red-500/90 text-white animate-pulse scale-110":d<=5?"bg-yellow-500/80 text-white scale-105":"bg-green-500/80 text-white"),children:d})}),U&&$.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-lg flex items-center justify-center",children:$.jsxs("div",{className:"text-center",children:[$.jsx("div",{className:"animate-spin w-6 h-6 border-4 border-blue-400 border-t-transparent rounded-full mx-auto mb-2"}),$.jsx("p",{className:"text-blue-400 text-sm",children:"Next image..."})]})})]})]})}),$.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-green-500/30 rounded-2xl p-8",children:[$.jsx("h3",{className:"text-lg font-bold text-green-400 mb-4",children:"Your Answer"}),$.jsxs("div",{className:"space-y-4",children:[$.jsx("input",{ref:K,type:"text",value:p,onChange:e=>f(e.target.value),onKeyPress:re,placeholder:"Type what you see...",className:"w-full p-4 bg-black/50 border border-green-500/30 rounded-lg text-white placeholder-gray-400 focus:border-green-400 focus:outline-none focus:ring-2 focus:ring-green-400/20 transition-all duration-300 text-lg",disabled:!M||U}),$.jsxs("div",{className:"flex gap-3",children:[$.jsx("button",{onClick:ee,disabled:!M||U,className:"flex-1 py-3 bg-gradient-to-r from-green-600 to-blue-600 rounded-lg font-bold text-white hover:from-green-500 hover:to-blue-500 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:U?"Processing...":"Submit Answer"}),$.jsx("button",{onClick:()=>{f(""),ee()},disabled:!M||U,className:"px-6 py-3 bg-yellow-600/20 border border-yellow-500/30 rounded-lg text-yellow-400 hover:bg-yellow-600/30 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Skip"})]})]}),$.jsx("div",{className:"mt-6 p-4 bg-white/5 rounded-lg",children:$.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[$.jsxs("div",{children:[$.jsx("div",{className:"text-2xl font-bold text-blue-400",children:u.length}),$.jsx("div",{className:"text-xs text-gray-400",children:"Answered"})]}),$.jsxs("div",{children:[$.jsx("div",{className:"text-2xl font-bold text-green-400",children:D.filter(Boolean).length}),$.jsx("div",{className:"text-xs text-gray-400",children:"Correct"})]}),$.jsxs("div",{children:[$.jsx("div",{className:"text-2xl font-bold text-purple-400",children:Math.min(a.imagesPerGame,E.length)-o}),$.jsx("div",{className:"text-xs text-gray-400",children:"Remaining"})]})]})}),$.jsx("div",{className:"mt-4 p-3 bg-blue-600/10 border border-blue-500/30 rounded-lg",children:$.jsxs("div",{className:"text-center",children:[$.jsxs("p",{className:"text-blue-400 text-sm font-medium",children:["üéØ Game continues until all ",a.imagesPerGame," images completed or ",Math.floor(a.totalGameTime/60)," minutes expire"]}),$.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Image timer only moves to next image - doesn't end game"})]})}),$.jsx("div",{className:"mt-4 p-3 bg-gray-600/10 border border-gray-500/30 rounded-lg",children:$.jsx("div",{className:"text-center",children:$.jsxs("p",{className:"text-gray-400 text-xs",children:["üêõ Debug: Image ",o+1,"/",E.length," | Game Ended: ",J.current?"Yes":"No"," | Transitioning: ",U?"Yes":"No"]})})}),$.jsx("div",{className:"mt-4 text-center",children:$.jsxs("div",{className:"text-xs text-gray-500",children:["Images preloaded: ",F.size," / ",E.length]})})]})]})]})})},Z=({players:e,gameSettings:t,onBack:s})=>{const a=e=>{switch(e){case 1:return $.jsx(N,{className:"w-6 h-6 text-yellow-400"});case 2:return $.jsx(L,{className:"w-6 h-6 text-gray-300"});case 3:return $.jsx(D,{className:"w-6 h-6 text-orange-400"});default:return $.jsx(R,{className:"w-6 h-6 text-blue-400"})}},r=e=>{switch(e){case 1:return"from-yellow-600/20 to-orange-600/20 border-yellow-500/30";case 2:return"from-gray-600/20 to-gray-500/20 border-gray-400/30";case 3:return"from-orange-600/20 to-red-600/20 border-orange-500/30";default:return"from-blue-600/10 to-purple-600/10 border-blue-500/20"}};return $.jsx("div",{className:"min-h-screen p-6",children:$.jsxs("div",{className:"max-w-4xl mx-auto",children:[$.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[$.jsx("button",{onClick:s,className:"p-3 bg-gray-600/20 border border-gray-500/30 rounded-lg hover:bg-gray-600/30 transition-all duration-300",children:$.jsx(h,{className:"w-5 h-5 text-gray-400"})}),$.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 bg-clip-text text-transparent",children:"üèÜ Leaderboard"})]}),0===e.length?$.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-gray-500/30 rounded-2xl p-12 text-center",children:[$.jsx(y,{className:"w-16 h-16 text-gray-400 mx-auto mb-4 opacity-50"}),$.jsx("h2",{className:"text-2xl font-bold text-gray-400 mb-2",children:"No Champions Yet!"}),$.jsx("p",{className:"text-gray-500",children:"Be the first to complete the Image Spotter challenge!"})]}):$.jsxs("div",{className:"space-y-4",children:[e.length>=3&&$.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-8",children:[$.jsx("div",{className:"order-1 md:order-1",children:$.jsxs("div",{className:"bg-gradient-to-br from-gray-600/20 to-gray-500/20 border border-gray-400/30 rounded-2xl p-6 text-center h-40 flex flex-col justify-center",children:[$.jsx(L,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),$.jsx("div",{className:"text-lg font-bold text-white",children:e[1].name}),$.jsx("div",{className:"text-2xl font-bold text-gray-300",children:e[1].score.toFixed(1)}),$.jsxs("div",{className:"text-xs text-gray-400",children:["Auto: ",e[1].autoScore.toFixed(1)]}),$.jsx("div",{className:"text-sm text-gray-400",children:"#2"})]})}),$.jsx("div",{className:"order-2 md:order-2",children:$.jsxs("div",{className:"bg-gradient-to-br from-yellow-600/30 to-orange-600/30 border border-yellow-500/50 rounded-2xl p-6 text-center h-48 flex flex-col justify-center relative overflow-hidden",children:[$.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-yellow-400/10 to-orange-400/10 animate-pulse"}),$.jsx(N,{className:"w-12 h-12 text-yellow-400 mx-auto mb-3 relative z-10"}),$.jsx("div",{className:"text-xl font-bold text-white relative z-10",children:e[0].name}),$.jsx("div",{className:"text-3xl font-bold text-yellow-400 relative z-10",children:e[0].score.toFixed(1)}),$.jsxs("div",{className:"text-xs text-yellow-300 relative z-10",children:["Auto: ",e[0].autoScore.toFixed(1)]}),$.jsx("div",{className:"text-sm text-yellow-300 relative z-10",children:"üëë CHAMPION"})]})}),$.jsx("div",{className:"order-3 md:order-3",children:$.jsxs("div",{className:"bg-gradient-to-br from-orange-600/20 to-red-600/20 border border-orange-500/30 rounded-2xl p-6 text-center h-40 flex flex-col justify-center",children:[$.jsx(D,{className:"w-8 h-8 text-orange-400 mx-auto mb-2"}),$.jsx("div",{className:"text-lg font-bold text-white",children:e[2].name}),$.jsx("div",{className:"text-2xl font-bold text-orange-400",children:e[2].score.toFixed(1)}),$.jsxs("div",{className:"text-xs text-orange-300",children:["Auto: ",e[2].autoScore.toFixed(1)]}),$.jsx("div",{className:"text-sm text-orange-300",children:"#3"})]})})]}),$.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-2xl p-8",children:[$.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[$.jsx(y,{className:"w-6 h-6 text-yellow-400"}),"Complete Rankings"]}),$.jsx("div",{className:"space-y-3",children:e.map((e,s)=>{const l=s+1;return $.jsxs("div",{className:`flex items-center justify-between p-6 rounded-xl bg-gradient-to-r border transition-all duration-300 hover:scale-[1.02] ${1===l?"from-yellow-600/20 to-orange-600/20 border-yellow-500/50 shadow-lg shadow-yellow-500/10":r(l)}`,children:[$.jsxs("div",{className:"flex items-center gap-4",children:[$.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-black/30",children:a(l)}),$.jsxs("div",{children:[$.jsxs("div",{className:"flex items-center gap-2",children:[$.jsxs("span",{className:"text-2xl font-bold "+(1===l?"text-yellow-400":2===l?"text-gray-300":3===l?"text-orange-400":"text-blue-400"),children:["#",l]}),$.jsx("span",{className:"text-xl font-bold text-white",children:e.name}),1===l&&$.jsxs("div",{className:"flex items-center gap-1",children:[$.jsx(N,{className:"w-5 h-5 text-yellow-400"}),$.jsx("span",{className:"text-yellow-400 text-sm font-medium",children:"CHAMPION"})]})]}),$.jsxs("div",{className:"text-gray-400 text-sm",children:[new Date(e.timestamp).toLocaleDateString()," at"," ",new Date(e.timestamp).toLocaleTimeString()]}),$.jsxs("div",{className:"flex gap-4 mt-1",children:[$.jsxs("span",{className:"text-xs text-blue-400",children:["Auto Score: ",e.autoScore.toFixed(1)]}),$.jsxs("span",{className:"text-xs text-green-400",children:["Final Score: ",e.score.toFixed(1)]})]})]})]}),$.jsxs("div",{className:"text-right",children:[$.jsx("div",{className:"text-3xl font-bold "+(1===l?"text-yellow-400":2===l?"text-gray-300":3===l?"text-orange-400":"text-blue-400"),children:e.score.toFixed(1)}),$.jsxs("div",{className:"text-gray-400 text-sm",children:["/ ",t.maxScore," points"]}),$.jsx("div",{className:"text-xs text-gray-500",children:e.score!==e.autoScore?"Admin Adjusted":"Auto Score"})]})]},e.id)})})]}),$.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[$.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-green-500/30 rounded-xl p-6 text-center",children:[$.jsx("div",{className:"text-2xl font-bold text-green-400",children:e.length}),$.jsx("div",{className:"text-gray-400",children:"Total Players"})]}),$.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-xl p-6 text-center",children:[$.jsx("div",{className:"text-2xl font-bold text-blue-400",children:e.length>0?(e.reduce((e,t)=>e+t.score,0)/e.length).toFixed(1):"0.0"}),$.jsx("div",{className:"text-gray-400",children:"Average Score"})]}),$.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-purple-500/30 rounded-xl p-6 text-center",children:[$.jsx("div",{className:"text-2xl font-bold text-purple-400",children:e.length>0?Math.max(...e.map(e=>e.score)).toFixed(1):"0.0"}),$.jsx("div",{className:"text-gray-400",children:"Highest Score"})]}),$.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-orange-500/30 rounded-xl p-6 text-center",children:[$.jsx("div",{className:"text-2xl font-bold text-orange-400",children:e.length>0?(e.reduce((e,t)=>e+t.autoScore,0)/e.length).toFixed(1):"0.0"}),$.jsx("div",{className:"text-gray-400",children:"Avg Auto Score"})]})]})]})]})})},Q=()=>{const e=s.useRef(null),t=s.useRef(),a=s.useRef([]),r=s.useCallback(()=>{const t=e.current;if(!t)return;const s=window.devicePixelRatio||1,a=t.getBoundingClientRect();t.width=a.width*s,t.height=a.height*s,t.style.width=a.width+"px",t.style.height=a.height+"px";const r=t.getContext("2d");r&&r.scale(s,s)},[]);return s.useEffect(()=>{const s=e.current;if(!s)return;const l=s.getContext("2d",{alpha:!1});if(!l)return;if(r(),0===a.current.length){const e=Math.min(150,Math.floor(window.innerWidth*window.innerHeight/1e4));for(let t=0;t<e;t++)a.current.push({x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,size:1.5*Math.random()+.5,opacity:.8*Math.random()+.2,speed:.3*Math.random()+.1,twinkleSpeed:.015*Math.random()+.005,twinklePhase:Math.random()*Math.PI*2})}let o=0,n=0;const i=1e3/30,c=e=>{if(e-n<i)return void(t.current=requestAnimationFrame(c));n=e,o+=.008;const r=s.getBoundingClientRect(),d=l.createLinearGradient(0,0,0,r.height);if(d.addColorStop(0,"#0a0a1a"),d.addColorStop(.5,"#1a0a2a"),d.addColorStop(1,"#2a0a3a"),l.fillStyle=d,l.fillRect(0,0,r.width,r.height),l.save(),a.current.forEach(e=>{e.y+=e.speed,e.y>r.height+10&&(e.y=-10,e.x=Math.random()*r.width),e.twinklePhase+=e.twinkleSpeed;const t=.4*Math.sin(e.twinklePhase)+.6,s=e.opacity*t;if(s<.1)return;const a=2*e.size,o=l.createRadialGradient(e.x,e.y,0,e.x,e.y,a);o.addColorStop(0,`rgba(255, 255, 255, ${s})`),o.addColorStop(.4,`rgba(150, 180, 255, ${.6*s})`),o.addColorStop(1,"rgba(150, 180, 255, 0)"),l.fillStyle=o,l.beginPath(),l.arc(e.x,e.y,a,0,2*Math.PI),l.fill(),l.fillStyle=`rgba(255, 255, 255, ${s})`,l.beginPath(),l.arc(e.x,e.y,.5*e.size,0,2*Math.PI),l.fill()}),l.restore(),o%2<.1){const e=l.createRadialGradient(.3*r.width,.7*r.height,0,.3*r.width,.7*r.height,.6*r.width);e.addColorStop(0,"rgba(100, 50, 150, 0.08)"),e.addColorStop(.5,"rgba(50, 100, 200, 0.04)"),e.addColorStop(1,"rgba(0, 50, 100, 0)"),l.fillStyle=e,l.fillRect(0,0,r.width,r.height)}t.current=requestAnimationFrame(c)},d=()=>{r(),a.current.forEach(e=>{e.x>window.innerWidth&&(e.x=Math.random()*window.innerWidth),e.y>window.innerHeight&&(e.y=Math.random()*window.innerHeight)})},m=()=>{document.hidden?t.current&&cancelAnimationFrame(t.current):t.current=requestAnimationFrame(c)};return window.addEventListener("resize",d),document.addEventListener("visibilitychange",m),t.current=requestAnimationFrame(c),()=>{window.removeEventListener("resize",d),document.removeEventListener("visibilitychange",m),t.current&&cancelAnimationFrame(t.current)}},[r]),$.jsx("canvas",{ref:e,className:"fixed top-0 left-0 w-full h-full -z-10 will-change-transform",style:{background:"radial-gradient(ellipse at center, #1a0a2a 0%, #0a0a1a 100%)",imageRendering:"optimizeSpeed"}})},ee=s.memo(({size:e="md",color:t="blue",text:s})=>$.jsxs("div",{className:"flex flex-col items-center justify-center",children:[$.jsx("div",{className:`${{sm:"w-6 h-6",md:"w-12 h-12",lg:"w-16 h-16"}[e]} border-4 ${{blue:"border-blue-400",purple:"border-purple-400",green:"border-green-400",yellow:"border-yellow-400"}[t]} border-t-transparent rounded-full animate-spin will-change-transform`,style:{animationDuration:"1s"}}),s&&$.jsx("p",{className:"mt-3 text-gray-400 text-sm animate-pulse",children:s})]}));function te(){const[e,t]=s.useState(!1),[l,o]=s.useState("home"),[n,i]=s.useState(""),[c,d]=s.useState("VIT Chennai Clubs"),[m,x]=s.useState(null),[u,h]=s.useState([]),[p,j]=s.useState([]),[N,v]=s.useState({imageTimeLimit:10,totalGameTime:300,maxScore:40,imagesPerGame:30,pointsPerImage:1}),[w,S]=s.useState(!1),[k,C]=s.useState(null),[E,I]=s.useState(!1),[T,A]=s.useState(!0),P=s.useMemo(()=>({imageTimeLimit:10,totalGameTime:300,maxScore:40,imagesPerGame:30,pointsPerImage:1}),[]);s.useEffect(()=>{(async()=>{try{A(!0),console.log("Loading persisted data...");const e=()=>{const e=H.loadData("image-spotter-players",[]);console.log("Loaded players:",e.length),h(e);const t=H.loadData("image-spotter-images",[]);console.log("Loaded images:",t.length),j(t);const s=H.loadData("image-spotter-game-settings",P);v(s);const a=H.loadData("image-spotter-club-logo","");a&&x(a),I(!0),A(!1),console.log("Data loading completed successfully")};"requestIdleCallback"in window?requestIdleCallback(e,{timeout:2e3}):setTimeout(e,0)}catch(e){console.error("Error loading persisted data:",e),h([]),j([]),v(P),I(!0),A(!1)}})()},[P]);const G=s.useCallback((e,t)=>{const s=setTimeout(()=>{try{H.saveData(e,t)||console.error(`Failed to save ${e}`)}catch(s){console.error(`Error saving ${e}:`,s)}},500);return()=>clearTimeout(s)},[]);s.useEffect(()=>{if(!E)return;return G("image-spotter-players",u)},[u,E,G]),s.useEffect(()=>{if(!E)return;return G("image-spotter-images",p)},[p,E,G]),s.useEffect(()=>{if(!E)return;return G("image-spotter-game-settings",N)},[N,E,G]),s.useEffect(()=>{if(!E)return;return G("image-spotter-club-logo",m||"")},[m,E,G]),s.useEffect(()=>{const e=setInterval(()=>{(u.length>0||p.length>0)&&"requestIdleCallback"in window&&requestIdleCallback(()=>{console.log("Performing periodic backup..."),H.saveData("image-spotter-players",u),H.saveData("image-spotter-images",p),H.saveData("image-spotter-game-settings",N),H.saveData("image-spotter-club-logo",m||"")})},3e5);return()=>clearInterval(e)},[u,p,N,m]),s.useEffect(()=>{const e=()=>{try{H.saveData("image-spotter-players",u),H.saveData("image-spotter-images",p),H.saveData("image-spotter-game-settings",N),H.saveData("image-spotter-club-logo",m||""),console.log("Data saved before page unload")}catch(e){console.error("Error saving data before unload:",e)}};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[u,p,N,m]);const L=s.useCallback((e,s)=>{t(!0),d(e),s&&x(s)},[]),D=s.useCallback(()=>{t(!1),o("home"),d("VIT Chennai Clubs"),x(null),H.clearCache()},[]),R=s.useCallback(()=>{if(!n.trim())return void alert("Please enter your name to start the game!");if(p.length<N.imagesPerGame)return void alert(`Not enough images uploaded yet. Need ${N.imagesPerGame} images. Please contact the game admin.`);const e=Date.now().toString();C(e),o("game")},[n,p.length,N.imagesPerGame]),O=s.useCallback((e,t)=>{if(k){const s={id:k,name:n,score:e,autoScore:t,timestamp:Date.now()};h(e=>{const t=[...e,s].sort((e,t)=>t.score-e.score);return console.log("New player added:",s.name,"Score:",s.score,"Auto Score:",s.autoScore),t})}o("home"),i(""),C(null)},[k,n]),_=s.useCallback((e,t)=>{h(s=>{const a=s.map(s=>s.id===e?{...s,score:t}:s).sort((e,t)=>t.score-e.score);return console.log("Player score updated:",e,"New score:",t),a})},[]),z=s.useCallback(e=>{v(e)},[]),F=s.useCallback(()=>{v(P),H.saveData("image-spotter-game-settings",P),alert("Game settings reset to default values and saved!")},[P]);return T||!E?$.jsxs("div",{className:"min-h-screen relative overflow-hidden flex items-center justify-center",children:[$.jsx(Q,{}),$.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-2xl p-8 text-center",children:[$.jsx(ee,{size:"lg",color:"blue"}),$.jsx("h2",{className:"text-xl font-bold text-white mb-2 mt-4",children:"Loading Game Data..."}),$.jsx("p",{className:"text-gray-400",children:"Please wait while we restore your data"})]})]}):e?"admin"===l?$.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[$.jsx(Q,{}),$.jsx(q,{gameImages:p,setGameImages:j,players:u,updatePlayerScore:_,gameSettings:N,updateGameSettings:z,resetToDefaults:F,clubLogo:m,setClubLogo:x,onBack:()=>o("home"),onLogout:D})]}):"game"===l?$.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[$.jsx(Q,{}),$.jsx(X,{playerName:n,gameImages:p,gameSettings:N,onGameComplete:O,onBack:()=>o("home")})]}):"leaderboard"===l?$.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[$.jsx(Q,{}),$.jsx(Z,{players:u,gameSettings:N,onBack:()=>o("home")})]}):$.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[$.jsx(Q,{}),$.jsx("div",{className:"relative z-10 p-6",children:$.jsxs("div",{className:"max-w-6xl mx-auto",children:[$.jsxs("div",{className:"flex justify-between items-center mb-8",children:[$.jsxs("div",{className:"text-center flex-1",children:[$.jsxs("div",{className:"flex items-center justify-center gap-8 mb-4",children:[$.jsxs("div",{className:"text-center",children:[$.jsxs("div",{className:"relative w-20 h-20 bg-gradient-to-br from-blue-400 via-purple-500 to-cyan-400 rounded-full flex items-center justify-center mb-3 mx-auto border-2 border-blue-400/30 shadow-lg shadow-blue-500/25 overflow-hidden",children:[$.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-400/20 to-purple-500/20 rounded-full animate-pulse"}),m?$.jsx("img",{src:m,alt:"Club Logo",className:"w-full h-full object-cover rounded-full relative z-10",loading:"eager"}):$.jsx(a,{className:"w-10 h-10 text-white relative z-10 transform rotate-45"}),$.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-yellow-400 rounded-full animate-ping"})]}),$.jsxs("div",{className:"bg-gradient-to-r from-blue-600/30 to-purple-600/30 border border-blue-500/40 rounded-xl px-4 py-2 backdrop-blur-sm",children:[$.jsx("p",{className:"text-sm text-blue-200 font-semibold",children:c}),$.jsxs("div",{className:"flex items-center justify-center gap-1 mt-1",children:[$.jsx("div",{className:"w-1 h-1 bg-blue-400 rounded-full"}),$.jsx("div",{className:"w-1 h-1 bg-purple-400 rounded-full"}),$.jsx("div",{className:"w-1 h-1 bg-cyan-400 rounded-full"})]})]})]}),$.jsxs("div",{className:"text-center",children:[$.jsxs("div",{className:"relative w-20 h-20 bg-gradient-to-br from-orange-400 via-red-500 to-pink-400 rounded-full flex items-center justify-center mb-3 mx-auto border-2 border-orange-400/30 shadow-lg shadow-orange-500/25 overflow-hidden",children:[$.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-400/20 to-red-500/20 rounded-full animate-pulse"}),$.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/en/c/c5/Vellore_Institute_of_Technology_seal_2017.png",alt:"VIT Chennai Logo",className:"w-full h-full object-cover rounded-full relative z-10",loading:"eager",onError:e=>{const t=e.target;t.style.display="none";const s=t.parentElement;s&&(s.innerHTML='<div class="w-10 h-10 text-white font-bold text-lg flex items-center justify-center relative z-10">VIT</div>')}}),$.jsx("div",{className:"absolute -bottom-1 -left-1 w-3 h-3 bg-cyan-400 rounded-full animate-bounce"})]}),$.jsxs("div",{className:"bg-gradient-to-r from-orange-600/30 to-red-600/30 border border-orange-500/40 rounded-xl px-4 py-2 backdrop-blur-sm",children:[$.jsx("p",{className:"text-sm text-orange-200 font-semibold",children:"VIT Chennai"}),$.jsxs("div",{className:"flex items-center justify-center gap-1 mt-1",children:[$.jsx("div",{className:"w-1 h-1 bg-orange-400 rounded-full"}),$.jsx("div",{className:"w-1 h-1 bg-red-400 rounded-full"}),$.jsx("div",{className:"w-1 h-1 bg-pink-400 rounded-full"})]})]})]})]}),$.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 bg-clip-text text-transparent mb-2",children:"Image Spotter"}),$.jsxs("p",{className:"text-xl text-blue-300 mb-2",children:[Math.floor(N.totalGameTime/60),"-Minute Vision Test"]}),$.jsx("p",{className:"text-sm text-gray-400",children:"Space-themed Gaming Platform"})]}),$.jsxs("div",{className:"flex gap-2",children:[$.jsx("button",{onClick:()=>o("admin"),className:"p-3 bg-purple-600/20 border border-purple-500/30 rounded-lg hover:bg-purple-600/30 transition-all duration-300 group",children:$.jsx(f,{className:"w-5 h-5 text-purple-400 group-hover:rotate-90 transition-transform duration-300"})}),$.jsx("button",{onClick:D,className:"p-3 bg-red-600/20 border border-red-500/30 rounded-lg hover:bg-red-600/30 transition-all duration-300",children:$.jsx(b,{className:"w-5 h-5 text-red-400"})})]})]}),$.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[$.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[$.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-2xl p-8",children:[$.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[$.jsx(M,{className:"w-6 h-6 text-blue-400"}),"Start Your Challenge"]}),$.jsxs("div",{className:"space-y-4",children:[$.jsxs("div",{children:[$.jsx("label",{className:"block text-blue-300 font-medium mb-2",children:"Enter Your Name"}),$.jsx("input",{type:"text",value:n,onChange:e=>i(e.target.value),placeholder:"Your name here...",className:"w-full p-4 bg-black/50 border border-blue-500/30 rounded-lg text-white placeholder-gray-400 focus:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-400/20 transition-all duration-300",onKeyPress:e=>"Enter"===e.key&&R()})]}),$.jsxs("button",{onClick:R,disabled:!n.trim()||p.length<N.imagesPerGame,className:"w-full py-4 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg font-bold text-white hover:from-blue-500 hover:to-purple-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105 hover:shadow-lg hover:shadow-blue-500/25",children:["üöÄ Start Game (",p.length,"/",N.imagesPerGame," images ready)"]})]})]}),$.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-green-500/30 rounded-2xl p-8",children:[$.jsxs("button",{onClick:()=>S(!w),className:"w-full flex items-center justify-between text-left",children:[$.jsx("h3",{className:"text-xl font-bold text-green-400",children:"üìñ Game Instructions"}),$.jsx("span",{className:"text-green-400",children:w?"‚àí":"+"})]}),w&&$.jsxs("div",{className:"mt-4 space-y-3 text-gray-300",children:[$.jsxs("div",{className:"flex items-start gap-3",children:[$.jsx("span",{className:"text-blue-400 font-bold",children:"üß†"}),$.jsxs("p",{children:["You will be shown ",N.imagesPerGame," random images to identify."]})]}),$.jsxs("div",{className:"flex items-start gap-3",children:[$.jsx("span",{className:"text-yellow-400 font-bold",children:"‚è±Ô∏è"}),$.jsxs("p",{children:["You have exactly ",N.imageTimeLimit," seconds per image to identify what it is."]})]}),$.jsxs("div",{className:"flex items-start gap-3",children:[$.jsx("span",{className:"text-red-400 font-bold",children:"üéØ"}),$.jsxs("p",{children:["Total game time is ",Math.floor(N.totalGameTime/60)," minutes - use your time wisely!"]})]}),$.jsxs("div",{className:"flex items-start gap-3",children:[$.jsx("span",{className:"text-purple-400 font-bold",children:"üìù"}),$.jsx("p",{children:"Type your answer in the text box below each image."})]}),$.jsxs("div",{className:"flex items-start gap-3",children:[$.jsx("span",{className:"text-green-400 font-bold",children:"üèÜ"}),$.jsxs("p",{children:["Your score will be calculated automatically (",N.pointsPerImage," point per correct answer) and can be adjusted by the game administrator (max ",N.maxScore," points)."]})]}),$.jsxs("div",{className:"flex items-start gap-3",children:[$.jsx("span",{className:"text-orange-400 font-bold",children:"üìä"}),$.jsx("p",{children:"Check the leaderboard to see your ranking!"})]})]})]})]}),$.jsxs("div",{className:"space-y-6",children:[$.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-yellow-500/30 rounded-2xl p-6",children:[$.jsxs("div",{className:"flex items-center justify-between mb-4",children:[$.jsxs("h3",{className:"text-xl font-bold text-yellow-400 flex items-center gap-2",children:[$.jsx(y,{className:"w-5 h-5"}),"Leaderboard"]}),$.jsx("button",{onClick:()=>o("leaderboard"),className:"text-yellow-400 hover:text-yellow-300 transition-colors",children:"View All"})]}),$.jsxs("div",{className:"space-y-3",children:[u.slice(0,5).map((e,t)=>$.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg transition-all duration-300 "+(0===t?"bg-gradient-to-r from-yellow-600/20 to-orange-600/20 border border-yellow-500/30":"bg-white/5 border border-gray-600/30"),children:[$.jsxs("div",{className:"flex items-center gap-3",children:[$.jsxs("span",{className:"text-lg font-bold "+(0===t?"text-yellow-400":1===t?"text-gray-300":2===t?"text-orange-400":"text-gray-500"),children:["#",t+1]}),$.jsxs("div",{children:[$.jsx("span",{className:"text-white font-medium block",children:e.name}),$.jsxs("span",{className:"text-xs text-gray-400",children:["Auto: ",e.autoScore]})]})]}),$.jsx("span",{className:"font-bold "+(0===t?"text-yellow-400":"text-blue-400"),children:e.score})]},e.id)),0===u.length&&$.jsxs("div",{className:"text-center py-8 text-gray-400",children:[$.jsx(r,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),$.jsx("p",{children:"No players yet!"}),$.jsx("p",{className:"text-sm",children:"Be the first to play!"})]})]})]}),$.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-blue-500/30 rounded-2xl p-6",children:[$.jsxs("h3",{className:"text-lg font-bold text-blue-400 mb-4 flex items-center gap-2",children:[$.jsx(g,{className:"w-5 h-5"}),"Game Status"]}),$.jsxs("div",{className:"space-y-3 text-sm",children:[$.jsxs("div",{className:"flex justify-between",children:[$.jsx("span",{className:"text-gray-400",children:"Images Ready:"}),$.jsxs("span",{className:"font-bold "+(p.length>=N.imagesPerGame?"text-green-400":"text-red-400"),children:[p.length,"/",N.imagesPerGame]})]}),$.jsxs("div",{className:"flex justify-between",children:[$.jsx("span",{className:"text-gray-400",children:"Total Players:"}),$.jsx("span",{className:"text-blue-400 font-bold",children:u.length})]}),$.jsxs("div",{className:"flex justify-between",children:[$.jsx("span",{className:"text-gray-400",children:"Game Duration:"}),$.jsxs("span",{className:"text-purple-400 font-bold",children:[Math.floor(N.totalGameTime/60)," minutes"]})]}),$.jsxs("div",{className:"flex justify-between",children:[$.jsx("span",{className:"text-gray-400",children:"Time per Image:"}),$.jsxs("span",{className:"text-green-400 font-bold",children:[N.imageTimeLimit,"s"]})]}),$.jsxs("div",{className:"flex justify-between",children:[$.jsx("span",{className:"text-gray-400",children:"Points per Image:"}),$.jsx("span",{className:"text-yellow-400 font-bold",children:N.pointsPerImage})]}),$.jsxs("div",{className:"flex justify-between",children:[$.jsx("span",{className:"text-gray-400",children:"Data Status:"}),$.jsx("span",{className:"text-green-400 font-bold",children:"‚úì Secured"})]})]})]})]})]})]})}),$.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-20 pointer-events-none",children:$.jsx("div",{className:"bg-gradient-to-t from-black/60 via-black/20 to-transparent p-4",children:$.jsx("div",{className:"max-w-6xl mx-auto",children:$.jsxs("div",{className:"flex items-center justify-between",children:[$.jsxs("div",{className:"flex items-center gap-3 pointer-events-auto",children:[$.jsxs("div",{className:"relative",children:[$.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-cyan-400 to-blue-500 rounded-lg flex items-center justify-center border border-cyan-400/30",children:$.jsx(a,{className:"w-4 h-4 text-white transform rotate-45"})}),$.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-yellow-400 rounded-full animate-pulse"})]}),$.jsxs("div",{className:"text-left",children:[$.jsx("div",{className:"text-sm font-bold bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent",children:"Developed by Meijeevan K.T"}),$.jsx("div",{className:"text-xs text-gray-400",children:"Space-themed Gaming Platform ‚Ä¢ VIT Chennai"})]})]}),$.jsxs("div",{className:"text-xs text-gray-500 pointer-events-auto",children:["v2.1 ‚Ä¢ ",(new Date).getFullYear()]})]})})})})]}):$.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[$.jsx(Q,{}),$.jsx(W,{onLogin:L})]})}ee.displayName="LoadingSpinner";class se extends s.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Error caught by boundary:",e,t),this.setState({error:e,errorInfo:t})}handleReload=()=>{window.location.reload()};handleGoHome=()=>{this.setState({hasError:!1}),window.location.href=window.location.origin};render(){return this.state.hasError?this.props.fallback?this.props.fallback:$.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 flex items-center justify-center p-6",children:$.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-red-500/30 rounded-2xl p-8 max-w-md w-full text-center",children:[$.jsx(E,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),$.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Oops! Something went wrong"}),$.jsx("p",{className:"text-gray-400 mb-6",children:"We encountered an unexpected error. Don't worry, your data is safe."}),$.jsxs("div",{className:"space-y-3",children:[$.jsxs("button",{onClick:this.handleReload,className:"w-full py-3 bg-blue-600/20 border border-blue-500/30 rounded-lg text-blue-400 hover:bg-blue-600/30 transition-all duration-300 flex items-center justify-center gap-2",children:[$.jsx(C,{className:"w-4 h-4"}),"Reload Page"]}),$.jsxs("button",{onClick:this.handleGoHome,className:"w-full py-3 bg-gray-600/20 border border-gray-500/30 rounded-lg text-gray-400 hover:bg-gray-600/30 transition-all duration-300 flex items-center justify-center gap-2",children:[$.jsx(O,{className:"w-4 h-4"}),"Go Home"]})]}),!1]})}):this.props.children}}window.addEventListener("error",e=>{console.error("Global error:",e.error)}),window.addEventListener("unhandledrejection",e=>{console.error("Unhandled promise rejection:",e.reason)}),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("SW registered: ",e)}).catch(e=>{console.log("SW registration failed: ",e)})});const ae=document.getElementById("root");if(!ae)throw new Error("Root element not found");K.createRoot(ae).render($.jsx(s.StrictMode,{children:$.jsx(se,{children:$.jsx(te,{})})}));
